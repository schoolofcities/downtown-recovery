import{S as qr,i as Rr,s as zr,y as wr,a as P,k as f,q as i,K as R,z as br,c as S,l as v,m as h,r as c,h as s,L as z,n as t,p as Ot,A as kr,b as ge,C as e,g as Er,d as xr,B as Dr,E as Cr,o as Lr,M as Yt,D as Ge,V as Br,X as Fr,u as jr,J as Vr}from"../chunks/index.5885d984.js";import{H as Hr}from"../chunks/global.e1ff8cb9.js";import{S as Jr}from"../chunks/SelectRegions.4d7f2f4b.js";import"../chunks/transform.4d2927c0.js";import{m as Nr,l as Gr,d as Wr,u as Ur}from"../chunks/red-arrow.6fc67973.js";import{c as Kt,s as Kr,r as Or}from"../chunks/stores.01dfc0ed.js";import{m as Yr,a as Qr}from"../chunks/min.d247b692.js";import{t as Xr}from"../chunks/time.13603cc8.js";import{l as Zr}from"../chunks/linear.6154f0ba.js";import{c as $r}from"../chunks/csv.3ac754ad.js";import{t as ea,l as ta}from"../chunks/line.277d9777.js";const ra=!0,Da=Object.freeze(Object.defineProperty({__proto__:null,prerender:ra},Symbol.toStringTag,{value:"Module"}));function Ir(o,r,a){const n=o.slice();return n[16]=r[a].city,n[17]=r[a].regressionLine,n[18]=r[a].startCircle,n[19]=r[a].endCircle,n[20]=r[a].meanLine,n[21]=r[a].perChangeDisplay,n[22]=r[a].percentageChange,n[24]=a,n}function Pr(o,r,a){const n=o.slice();return n[25]=r[a],n[24]=a,n}function Sr(o,r,a){const n=o.slice();return n[25]=r[a],n[24]=a,n}function aa(o){let r,a,n,l,m,g,V,k,$,N,U=o[3].monthNumber+"",le,J,ne=o[3].year2+"",K,F,Z=o[3].monthNumber+"",se,p,q=o[3].year1+"",D,w,C=o[3].year1+"",O,G,Y=o[3].year2+"",W,I,L,ee,E=[5,6,7,8,9,10,11,12,1,2,3,4,5],H=[];for(let y=0;y<13;y+=1)H[y]=Tr(Sr(o,E,y));let te=o[2],T=[];for(let y=0;y<te.length;y+=1)T[y]=Ar(Ir(o,te,y));return{c(){r=f("div"),a=f("div"),n=f("div"),l=f("div"),m=R("svg"),g=R("text"),V=i("City"),k=R("text"),$=i("Percent Change in Unique Devices"),N=R("text"),le=i(U),J=i("/"),K=i(ne),F=i(" vs. "),se=i(Z),p=i("/"),D=i(q),w=R("text"),O=i(C),G=R("text"),W=i(Y),I=R("line");for(let y=0;y<13;y+=1)H[y].c();L=R("line"),ee=P();for(let y=0;y<T.length;y+=1)T[y].c();this.h()},l(y){r=v(y,"DIV",{class:!0});var Q=h(r);a=v(Q,"DIV",{class:!0});var u=h(a);n=v(u,"DIV",{class:!0});var x=h(n);l=v(x,"DIV",{class:!0});var de=h(l);m=z(de,"svg",{width:!0,height:!0,class:!0});var M=h(m);g=z(M,"text",{x:!0,y:!0,class:!0});var d=h(g);V=c(d,"City"),d.forEach(s),k=z(M,"text",{x:!0,y:!0,class:!0});var _=h(k);$=c(_,"Percent Change in Unique Devices"),_.forEach(s),N=z(M,"text",{x:!0,y:!0,class:!0});var b=h(N);le=c(b,U),J=c(b,"/"),K=c(b,ne),F=c(b," vs. "),se=c(b,Z),p=c(b,"/"),D=c(b,q),b.forEach(s),w=z(M,"text",{x:!0,y:!0,class:!0});var oe=h(w);O=c(oe,C),oe.forEach(s),G=z(M,"text",{x:!0,y:!0,class:!0});var ue=h(G);W=c(ue,Y),ue.forEach(s),I=z(M,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),h(I).forEach(s);for(let j=0;j<13;j+=1)H[j].l(M);L=z(M,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),h(L).forEach(s),M.forEach(s),de.forEach(s),x.forEach(s),ee=S(u);for(let j=0;j<T.length;j+=1)T[j].l(u);u.forEach(s),Q.forEach(s),this.h()},h(){t(g,"x","12"),t(g,"y","35"),t(g,"class","textCity svelte-1ldjehg"),t(k,"x","235"),t(k,"y","15"),t(k,"class","textLabel svelte-1ldjehg"),t(N,"x","235"),t(N,"y","35"),t(N,"class","textLabel svelte-1ldjehg"),t(w,"x",260+(13-o[3].monthNumber)/2*X/13),t(w,"y","15"),t(w,"class","textMonth svelte-1ldjehg"),t(G,"x",260+(13-o[3].monthNumber)*X/13+o[3].monthNumber/2*X/13),t(G,"y","15"),t(G,"class","textMonth svelte-1ldjehg"),t(I,"x1","260"),t(I,"y1",45),t(I,"x2",260+X),t(I,"y2",45),t(I,"stroke","white"),t(I,"stroke-width","1"),t(L,"x1",259+X),t(L,"y1",45),t(L,"x2",259+X),t(L,"y2",40),t(L,"stroke","white"),t(L,"stroke-width","1"),t(m,"width","760"),t(m,"height",ze),t(m,"class","region-bar"),t(l,"class","left svelte-1ldjehg"),t(n,"class","chart-wrapper svelte-1ldjehg"),t(a,"class","charts-inner svelte-1ldjehg"),t(r,"class","charts-scroll-container svelte-1ldjehg")},m(y,Q){ge(y,r,Q),e(r,a),e(a,n),e(n,l),e(l,m),e(m,g),e(g,V),e(m,k),e(k,$),e(m,N),e(N,le),e(N,J),e(N,K),e(N,F),e(N,se),e(N,p),e(N,D),e(m,w),e(w,O),e(m,G),e(G,W),e(m,I);for(let u=0;u<13;u+=1)H[u]&&H[u].m(m,null);e(m,L),e(a,ee);for(let u=0;u<T.length;u+=1)T[u]&&T[u].m(a,null)},p(y,Q){if(Q&0){E=[5,6,7,8,9,10,11,12,1,2,3,4,5];let u;for(u=0;u<13;u+=1){const x=Sr(y,E,u);H[u]?H[u].p(x,Q):(H[u]=Tr(x),H[u].c(),H[u].m(m,L))}for(;u<13;u+=1)H[u].d(1)}if(Q&22){te=y[2];let u;for(u=0;u<te.length;u+=1){const x=Ir(y,te,u);T[u]?T[u].p(x,Q):(T[u]=Ar(x),T[u].c(),T[u].m(a,null))}for(;u<T.length;u+=1)T[u].d(1);T.length=te.length}},d(y){y&&s(r),Yt(H,y),Yt(T,y)}}}function la(o){let r,a,n,l,m;return{c(){r=f("div"),a=f("div"),n=P(),l=f("p"),m=i("Loading data..."),this.h()},l(g){r=v(g,"DIV",{class:!0});var V=h(r);a=v(V,"DIV",{class:!0}),h(a).forEach(s),n=S(V),l=v(V,"P",{class:!0});var k=h(l);m=c(k,"Loading data..."),k.forEach(s),V.forEach(s),this.h()},h(){t(a,"class","loading-spinner svelte-1ldjehg"),t(l,"class","loading-text svelte-1ldjehg"),t(r,"class","loading-container svelte-1ldjehg")},m(g,V){ge(g,r,V),e(r,a),e(r,n),e(r,l),e(l,m)},p:Ge,d(g){g&&s(r)}}}function sa(o){let r;return{c(){r=R("line"),this.h()},l(a){r=z(a,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),h(r).forEach(s),this.h()},h(){t(r,"x1",260+o[24]*X/13),t(r,"y1",5),t(r,"x2",260+o[24]*X/13),t(r,"y2",40),t(r,"stroke","white"),t(r,"stroke-width","1")},m(a,n){ge(a,r,n)},p:Ge,d(a){a&&s(r)}}}function Tr(o){let r,a,n,l=o[25]===1&&sa(o);return{c(){r=R("line"),l&&l.c(),a=R("text"),n=i(o[25]),this.h()},l(m){r=z(m,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),h(r).forEach(s),l&&l.l(m),a=z(m,"text",{x:!0,y:!0,class:!0});var g=h(a);n=c(g,o[25]),g.forEach(s),this.h()},h(){t(r,"x1",260+o[24]*X/13),t(r,"y1",45),t(r,"x2",260+o[24]*X/13),t(r,"y2",40),t(r,"stroke","white"),t(r,"stroke-width","1"),t(a,"x",260+o[24]*X/13+.5*X/13),t(a,"y","40"),t(a,"class","textMonth svelte-1ldjehg")},m(m,g){ge(m,r,g),l&&l.m(m,g),ge(m,a,g),e(a,n)},p(m,g){m[25]===1&&l.p(m,g)},d(m){m&&s(r),l&&l.d(m),m&&s(a)}}}function na(o){let r,a;return{c(){r=f("img"),this.h()},l(n){r=v(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Vr(r.src,a=Wr)||t(r,"src",a),t(r,"alt","Down arrow"),t(r,"class","arrow-icon svelte-1ldjehg")},m(n,l){ge(n,r,l)},p:Ge,d(n){n&&s(r)}}}function oa(o){let r,a;return{c(){r=f("img"),this.h()},l(n){r=v(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Vr(r.src,a=Ur)||t(r,"src",a),t(r,"alt","Up arrow"),t(r,"class","arrow-icon svelte-1ldjehg")},m(n,l){ge(n,r,l)},p:Ge,d(n){n&&s(r)}}}function Mr(o){let r;return{c(){r=R("line"),this.h()},l(a){r=z(a,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),h(r).forEach(s),this.h()},h(){t(r,"x1",o[25]*X/13),t(r,"y1",5),t(r,"x2",o[25]*X/13),t(r,"y2",45),t(r,"stroke","#333333"),t(r,"stroke-width","1")},m(a,n){ge(a,r,n)},p:Ge,d(a){a&&s(r)}}}function Ar(o){let r,a,n,l,m,g,V=o[24]+1+"",k,$,N=o[16]+"",U,le,J,ne,K,F,Z,se=o[21]+"",p,q,D,w,C,O,G,Y,W,I,L,ee,E,H,te,T,y;function Q(d,_){if(d[22]>0)return oa;if(d[22]<0)return na}let u=Q(o),x=u&&u(o),de=[1,2,3,4,5,6,7,8,9,10,11,12],M=[];for(let d=0;d<12;d+=1)M[d]=Mr(Pr(o,de,d));return{c(){r=f("div"),a=f("div"),n=R("svg"),l=R("line"),g=R("text"),k=i(V),$=i(". "),U=i(N),le=P(),J=f("div"),x&&x.c(),ne=P(),K=f("div"),F=R("svg"),Z=R("text"),p=i(se),q=P(),D=f("div"),w=R("svg");for(let d=0;d<12;d+=1)M[d].c();C=R("line"),Y=R("path"),I=R("circle"),E=R("circle"),T=P(),this.h()},l(d){r=v(d,"DIV",{class:!0});var _=h(r);a=v(_,"DIV",{class:!0});var b=h(a);n=z(b,"svg",{width:!0,height:!0,class:!0});var oe=h(n);l=z(oe,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),h(l).forEach(s),g=z(oe,"text",{x:!0,y:!0,class:!0});var ue=h(g);k=c(ue,V),$=c(ue,". "),U=c(ue,N),ue.forEach(s),oe.forEach(s),b.forEach(s),le=S(_),J=v(_,"DIV",{class:!0});var j=h(J);x&&x.l(j),j.forEach(s),ne=S(_),K=v(_,"DIV",{class:!0});var Ne=h(K);F=z(Ne,"svg",{width:!0,height:!0,class:!0});var Le=h(F);Z=z(Le,"text",{x:!0,y:!0,class:!0});var Ie=h(Z);p=c(Ie,se),Ie.forEach(s),Le.forEach(s),Ne.forEach(s),q=S(_),D=v(_,"DIV",{class:!0,style:!0});var Pe=h(D);w=z(Pe,"svg",{height:!0,width:!0,class:!0});var _e=h(w);for(let ke=0;ke<12;ke+=1)M[ke].l(_e);C=z(_e,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0}),h(C).forEach(s),Y=z(_e,"path",{d:!0,stroke:!0,"stroke-width":!0,fill:!0}),h(Y).forEach(s),I=z(_e,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),h(I).forEach(s),E=z(_e,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0}),h(E).forEach(s),_e.forEach(s),Pe.forEach(s),T=S(_),_.forEach(s),this.h()},h(){t(l,"x1","5"),t(l,"y1","15"),t(l,"x2","5"),t(l,"y2",ze-15),t(l,"stroke",m=o[4](o[16])),t(l,"stroke-width","5"),t(g,"x","12"),t(g,"y","31"),t(g,"class","textCity svelte-1ldjehg"),t(n,"width","150"),t(n,"height",ze),t(n,"class","region-bar"),t(a,"class","left svelte-1ldjehg"),t(J,"class","arrow svelte-1ldjehg"),t(Z,"x","50"),t(Z,"y","45"),t(Z,"class","textPercent svelte-1ldjehg"),t(F,"width","50"),t(F,"height",ze),t(F,"class","region-bar"),t(K,"class","number svelte-1ldjehg"),t(C,"x1","0"),t(C,"y1",O=o[20]),t(C,"x2",X),t(C,"y2",G=o[20]),t(C,"stroke","#D0D1C9"),t(C,"stroke-width","1"),t(C,"stroke-dasharray","4"),t(Y,"d",W=o[17]),t(Y,"stroke","white"),t(Y,"stroke-width","2"),t(Y,"fill","none"),t(I,"cx",L=o[18].cx),t(I,"cy",ee=o[18].cy),t(I,"r","2"),t(I,"fill","white"),t(E,"cx",H=o[19].cx),t(E,"cy",te=o[19].cy),t(E,"r","2"),t(E,"fill","white"),t(E,"stroke","white"),t(w,"height",ze),t(w,"width",X),t(w,"class","chart svelte-1ldjehg"),t(D,"class","chart-container svelte-1ldjehg"),Ot(D,"width",X),t(r,"class","chart-wrapper svelte-1ldjehg"),Br(()=>o[11].call(r))},m(d,_){ge(d,r,_),e(r,a),e(a,n),e(n,l),e(n,g),e(g,k),e(g,$),e(g,U),e(r,le),e(r,J),x&&x.m(J,null),e(r,ne),e(r,K),e(K,F),e(F,Z),e(Z,p),e(r,q),e(r,D),e(D,w);for(let b=0;b<12;b+=1)M[b]&&M[b].m(w,null);e(w,C),e(w,Y),e(w,I),e(w,E),e(r,T),y=Fr(r,o[11].bind(r))},p(d,_){if(_&4&&m!==(m=d[4](d[16]))&&t(l,"stroke",m),_&4&&N!==(N=d[16]+"")&&jr(U,N),u===(u=Q(d))&&x?x.p(d,_):(x&&x.d(1),x=u&&u(d),x&&(x.c(),x.m(J,null))),_&4&&se!==(se=d[21]+"")&&jr(p,se),_&0){de=[1,2,3,4,5,6,7,8,9,10,11,12];let b;for(b=0;b<12;b+=1){const oe=Pr(d,de,b);M[b]?M[b].p(oe,_):(M[b]=Mr(oe),M[b].c(),M[b].m(w,C))}for(;b<12;b+=1)M[b].d(1)}_&4&&O!==(O=d[20])&&t(C,"y1",O),_&4&&G!==(G=d[20])&&t(C,"y2",G),_&4&&W!==(W=d[17])&&t(Y,"d",W),_&4&&L!==(L=d[18].cx)&&t(I,"cx",L),_&4&&ee!==(ee=d[18].cy)&&t(I,"cy",ee),_&4&&H!==(H=d[19].cx)&&t(E,"cx",H),_&4&&te!==(te=d[19].cy)&&t(E,"cy",te)},d(d){d&&s(r),x&&x.d(),Yt(M,d),y()}}}function ia(o){let r,a,n,l,m,g,V,k,$,N,U,le,J,ne,K,F,Z,se,p,q,D,w,C,O,G=o[3].day2+"",Y,W,I,L,ee,E,H,te=o[3].monthName+"",T,y,Q=o[3].monthName+"",u,x,de=o[3].monthName+"",M,d,_,b,oe,ue,j,Ne,Le=o[3].monthName+"",Ie,Pe,_e=o[3].monthName+"",ke,Ye,Qe,Xe,Se,Ze,$e,Te,et,tt,rt,at,Me,lt,st,nt,Ee,ot,Ae,it,ct,ht,Be,dt,ut,pe,ft,Qt=o[3].monthName+"",vt,mt,Xt=o[3].monthName+"",gt,_t,pt,Fe,yt,He,wt,bt,xe,kt,ce,De,fe,Et,Zt=o[3].monthName+"",xt,Dt,$t=o[3].year1+"",Ct,jt,Nt,We,re,It,Pt,St,Tt,Je,Mt,At,ve,Vt,Ve,qt,Rt,qe,zt,Lt,Ce,Bt,Ft,Ht,Jt,Gt,Wt,Ue;r=new Hr({}),xe=new Jr({props:{europe:"no",canada:"yes"}});function er(B,ie){return B[0]?la:aa}let Ke=er(o),me=Ke(o);return{c(){wr(r.$$.fragment),a=P(),n=f("main"),l=f("div"),m=f("h1"),g=i("Recovery Trends"),V=P(),k=f("p"),$=i("By "),N=f("a"),U=i("Karen Chapple"),le=i(", "),J=f("a"),ne=i("Julia Greenberg"),K=i(", "),F=f("a"),Z=i("Jeff Allen"),se=i(", "),p=f("a"),q=i("Irene Chang"),D=P(),w=f("p"),C=f("i"),O=i("Updated "),Y=i(G),W=P(),I=f("p"),L=i("Data on cell phone activity (a.k.a. footfall) trends for the last year provide a picture of how downtowns are faring since our last rankings update in the summer of 2023. We look here at year-over-year (2024 vs. 2023) trends, updated monthly."),ee=P(),E=f("p"),H=i("The solid line represents the number of daily unique devices in the downtown area. The dotted line provides a baseline of the average level of activity in "),T=i(te),y=i(" 2023, allowing for comparison to subsequent months. When the solid line extends above the dotted baseline, downtown activity is greater compared to in "),u=i(Q),x=i(" 2023. When it dips below the dotted line, activity is on a downswing. For most cities, there is an increase in month 6 or 7; this is expected since these are the summer months of June and July. The fall months see decreasing activity on average, with almost all downtowns losing activity by November. However, some cities stay above the "),M=i(de),d=i(" baseline, suggesting gradual recovery, while others dip well below it, i.e., stagnating recovery."),_=P(),b=f("h5"),oe=i("Key Findings:"),ue=P(),j=f("p"),Ne=i("Comparing "),Ie=i(Le),Pe=i(" 2023 to "),ke=i(_e),Ye=i(` 2024:\r
			`),Qe=f("br"),Xe=i(`\r
	\r
			‣ `),Se=f("span"),Ze=i("27"),$e=i(" downtowns are in an upward trajectory, while "),Te=f("span"),et=i("37"),tt=i(` are trending downwards. \r
			`),rt=f("br"),at=i(`\r
			‣ The median rate of change is `),Me=f("span"),lt=i("-3.1%"),st=i("."),nt=P(),Ee=f("p"),ot=i("In general, the downtowns that are seeing the highest rates of activity increase are the downtowns where recovery was lagging in our "),Ae=f("a"),it=i("2023 rankings"),ct=i("."),ht=P(),Be=f("p"),dt=i("Note: Trends are based on data from Spectus, but use different cell phone data providers from our rankings analysis. The trendlines measure the average level of activity over the course of the year, while the ranking metric shows the percent difference in the average number of unique devices in 2024 versus the same month in 2023."),ut=P(),pe=f("h4"),ft=i("Unique Devices Downtown ("),vt=i(Qt),mt=i(" 1, 2023 to "),gt=i(Xt),_t=i(" 28, 2024)"),pt=P(),Fe=f("div"),yt=P(),He=f("p"),wt=i("Select Regions:"),bt=P(),wr(xe.$$.fragment),kt=P(),ce=f("p"),De=R("svg"),fe=R("line"),Et=P(),xt=i(Zt),Dt=P(),Ct=i($t),jt=i(" average"),Nt=P(),me.c(),We=P(),re=f("div"),It=f("br"),Pt=P(),St=f("br"),Tt=P(),Je=f("h4"),Mt=i("More Information"),At=P(),ve=f("p"),Vt=i("The trend lines are fit from daily data via a "),Ve=f("a"),qt=i("LOESS"),Rt=i(" curve. You can download the raw daily data shown to fit these curves "),qe=f("a"),zt=i("from this link"),Lt=i(". The data on the charts are based on the `normalized_distinct_clean` column, which pertains to the number of unique daily devices normalized by the total number in the metro area. The trend-line and summary statistics shown are calculated in JavaScript (code is on "),Ce=f("a"),Bt=i("GitHub"),Ft=i(")"),Ht=P(),Jt=f("br"),Gt=P(),Wt=f("br"),this.h()},l(B){br(r.$$.fragment,B),a=S(B),n=v(B,"MAIN",{});var ie=h(n);l=v(ie,"DIV",{class:!0});var A=h(l);m=v(A,"H1",{});var tr=h(m);g=c(tr,"Recovery Trends"),tr.forEach(s),V=S(A),k=v(A,"P",{});var ye=h(k);$=c(ye,"By "),N=v(ye,"A",{href:!0});var rr=h(N);U=c(rr,"Karen Chapple"),rr.forEach(s),le=c(ye,", "),J=v(ye,"A",{href:!0});var ar=h(J);ne=c(ar,"Julia Greenberg"),ar.forEach(s),K=c(ye,", "),F=v(ye,"A",{href:!0});var lr=h(F);Z=c(lr,"Jeff Allen"),lr.forEach(s),se=c(ye,", "),p=v(ye,"A",{href:!0});var sr=h(p);q=c(sr,"Irene Chang"),sr.forEach(s),ye.forEach(s),D=S(A),w=v(A,"P",{});var nr=h(w);C=v(nr,"I",{});var Ut=h(C);O=c(Ut,"Updated "),Y=c(Ut,G),Ut.forEach(s),nr.forEach(s),W=S(A),I=v(A,"P",{});var or=h(I);L=c(or,"Data on cell phone activity (a.k.a. footfall) trends for the last year provide a picture of how downtowns are faring since our last rankings update in the summer of 2023. We look here at year-over-year (2024 vs. 2023) trends, updated monthly."),or.forEach(s),ee=S(A),E=v(A,"P",{});var we=h(E);H=c(we,"The solid line represents the number of daily unique devices in the downtown area. The dotted line provides a baseline of the average level of activity in "),T=c(we,te),y=c(we," 2023, allowing for comparison to subsequent months. When the solid line extends above the dotted baseline, downtown activity is greater compared to in "),u=c(we,Q),x=c(we," 2023. When it dips below the dotted line, activity is on a downswing. For most cities, there is an increase in month 6 or 7; this is expected since these are the summer months of June and July. The fall months see decreasing activity on average, with almost all downtowns losing activity by November. However, some cities stay above the "),M=c(we,de),d=c(we," baseline, suggesting gradual recovery, while others dip well below it, i.e., stagnating recovery."),we.forEach(s),_=S(A),b=v(A,"H5",{});var ir=h(b);oe=c(ir,"Key Findings:"),ir.forEach(s),ue=S(A),j=v(A,"P",{});var ae=h(j);Ne=c(ae,"Comparing "),Ie=c(ae,Le),Pe=c(ae," 2023 to "),ke=c(ae,_e),Ye=c(ae,` 2024:\r
			`),Qe=v(ae,"BR",{}),Xe=c(ae,`\r
	\r
			‣ `),Se=v(ae,"SPAN",{class:!0});var cr=h(Se);Ze=c(cr,"27"),cr.forEach(s),$e=c(ae," downtowns are in an upward trajectory, while "),Te=v(ae,"SPAN",{class:!0});var hr=h(Te);et=c(hr,"37"),hr.forEach(s),tt=c(ae,` are trending downwards. \r
			`),rt=v(ae,"BR",{}),at=c(ae,`\r
			‣ The median rate of change is `),Me=v(ae,"SPAN",{class:!0});var dr=h(Me);lt=c(dr,"-3.1%"),dr.forEach(s),st=c(ae,"."),ae.forEach(s),nt=S(A),Ee=v(A,"P",{});var Oe=h(Ee);ot=c(Oe,"In general, the downtowns that are seeing the highest rates of activity increase are the downtowns where recovery was lagging in our "),Ae=v(Oe,"A",{href:!0});var ur=h(Ae);it=c(ur,"2023 rankings"),ur.forEach(s),ct=c(Oe,"."),Oe.forEach(s),ht=S(A),Be=v(A,"P",{});var fr=h(Be);dt=c(fr,"Note: Trends are based on data from Spectus, but use different cell phone data providers from our rankings analysis. The trendlines measure the average level of activity over the course of the year, while the ranking metric shows the percent difference in the average number of unique devices in 2024 versus the same month in 2023."),fr.forEach(s),ut=S(A),pe=v(A,"H4",{});var Re=h(pe);ft=c(Re,"Unique Devices Downtown ("),vt=c(Re,Qt),mt=c(Re," 1, 2023 to "),gt=c(Re,Xt),_t=c(Re," 28, 2024)"),Re.forEach(s),pt=S(A),Fe=v(A,"DIV",{class:!0}),h(Fe).forEach(s),yt=S(A),He=v(A,"P",{});var vr=h(He);wt=c(vr,"Select Regions:"),vr.forEach(s),bt=S(A),br(xe.$$.fragment,A),kt=S(A),ce=v(A,"P",{style:!0});var je=h(ce);De=z(je,"svg",{height:!0,width:!0});var mr=h(De);fe=z(mr,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0}),h(fe).forEach(s),mr.forEach(s),Et=S(je),xt=c(je,Zt),Dt=S(je),Ct=c(je,$t),jt=c(je," average"),je.forEach(s),A.forEach(s),Nt=S(ie),me.l(ie),We=S(ie),re=v(ie,"DIV",{class:!0});var he=h(re);It=v(he,"BR",{}),Pt=S(he),St=v(he,"BR",{}),Tt=S(he),Je=v(he,"H4",{});var gr=h(Je);Mt=c(gr,"More Information"),gr.forEach(s),At=S(he),ve=v(he,"P",{});var be=h(ve);Vt=c(be,"The trend lines are fit from daily data via a "),Ve=v(be,"A",{href:!0});var _r=h(Ve);qt=c(_r,"LOESS"),_r.forEach(s),Rt=c(be," curve. You can download the raw daily data shown to fit these curves "),qe=v(be,"A",{href:!0});var pr=h(qe);zt=c(pr,"from this link"),pr.forEach(s),Lt=c(be,". The data on the charts are based on the `normalized_distinct_clean` column, which pertains to the number of unique daily devices normalized by the total number in the metro area. The trend-line and summary statistics shown are calculated in JavaScript (code is on "),Ce=v(be,"A",{href:!0,target:!0});var yr=h(Ce);Bt=c(yr,"GitHub"),yr.forEach(s),Ft=c(be,")"),be.forEach(s),Ht=S(he),Jt=v(he,"BR",{}),Gt=S(he),Wt=v(he,"BR",{}),he.forEach(s),ie.forEach(s),this.h()},h(){t(N,"href","https://schoolofcities.utoronto.ca/people/karen-chapple/"),t(J,"href","https://www.urbandisplacement.org/team/julia-greenberg/"),t(F,"href","https://schoolofcities.utoronto.ca/people/jeff-allen/"),t(p,"href","https://www.linkedin.com/in/irene-kcc/"),t(Se,"class","bold"),t(Te,"class","bold"),t(Me,"class","bold"),t(Ae,"href","/charts/rankings"),t(Fe,"class","view-toggle"),t(fe,"x1","0"),t(fe,"y1","5"),t(fe,"x2","50"),t(fe,"y2","5"),t(fe,"stroke","white"),t(fe,"stroke-width","1"),t(fe,"stroke-dasharray","4"),t(De,"height","10"),t(De,"width","50"),Ot(ce,"padding-top","10px"),Ot(ce,"padding-bottom","10px"),t(l,"class","text svelte-1ldjehg"),t(Ve,"href","https://en.wikipedia.org/wiki/Local_regression"),t(qe,"href","/trends.csv"),t(Ce,"href","https://github.com/schoolofcities/downtown-recovery/blob/main/src/routes/charts/trends/%2Bpage.svelte"),t(Ce,"target","_blank"),t(re,"class","text svelte-1ldjehg")},m(B,ie){kr(r,B,ie),ge(B,a,ie),ge(B,n,ie),e(n,l),e(l,m),e(m,g),e(l,V),e(l,k),e(k,$),e(k,N),e(N,U),e(k,le),e(k,J),e(J,ne),e(k,K),e(k,F),e(F,Z),e(k,se),e(k,p),e(p,q),e(l,D),e(l,w),e(w,C),e(C,O),e(C,Y),e(l,W),e(l,I),e(I,L),e(l,ee),e(l,E),e(E,H),e(E,T),e(E,y),e(E,u),e(E,x),e(E,M),e(E,d),e(l,_),e(l,b),e(b,oe),e(l,ue),e(l,j),e(j,Ne),e(j,Ie),e(j,Pe),e(j,ke),e(j,Ye),e(j,Qe),e(j,Xe),e(j,Se),e(Se,Ze),e(j,$e),e(j,Te),e(Te,et),e(j,tt),e(j,rt),e(j,at),e(j,Me),e(Me,lt),e(j,st),e(l,nt),e(l,Ee),e(Ee,ot),e(Ee,Ae),e(Ae,it),e(Ee,ct),e(l,ht),e(l,Be),e(Be,dt),e(l,ut),e(l,pe),e(pe,ft),e(pe,vt),e(pe,mt),e(pe,gt),e(pe,_t),e(l,pt),e(l,Fe),e(l,yt),e(l,He),e(He,wt),e(l,bt),kr(xe,l,null),e(l,kt),e(l,ce),e(ce,De),e(De,fe),e(ce,Et),e(ce,xt),e(ce,Dt),e(ce,Ct),e(ce,jt),e(n,Nt),me.m(n,null),e(n,We),e(n,re),e(re,It),e(re,Pt),e(re,St),e(re,Tt),e(re,Je),e(Je,Mt),e(re,At),e(re,ve),e(ve,Vt),e(ve,Ve),e(Ve,qt),e(ve,Rt),e(ve,qe),e(qe,zt),e(ve,Lt),e(ve,Ce),e(Ce,Bt),e(ve,Ft),e(re,Ht),e(re,Jt),e(re,Gt),e(re,Wt),Ue=!0},p(B,[ie]){Ke===(Ke=er(B))&&me?me.p(B,ie):(me.d(1),me=Ke(B),me&&(me.c(),me.m(n,We)))},i(B){Ue||(Er(r.$$.fragment,B),Er(xe.$$.fragment,B),Ue=!0)},o(B){xr(r.$$.fragment,B),xr(xe.$$.fragment,B),Ue=!1},d(B){Dr(r,B),B&&s(a),B&&s(n),Dr(xe),me.d()}}}let X=500;const ze=50,ca=0,ha=5,da=0,ua=5;function fa(o,r,a){let n,l,m;Cr(o,Kr,p=>a(10,l=p)),Cr(o,Or,p=>a(12,m=p));const g=m;let V={monthName:"May",monthNumber:5,year1:2023,year2:2024,day1:"2023-05-01",day2:"2024-05-28"},k=!0,$=null;async function N(){a(0,k=!0);try{const q=await(await fetch("/trends.csv")).text();a(6,U=$r(q)),a(7,ne=[...new Set(U.map(D=>D.city))])}catch(p){console.error("Error loading CSV data:",p)}}let U=[];Lr(()=>{N(),a(9,n=Kt.filter(p=>l.includes(p.region)).map(p=>p.city))});let le;const J=ea("%Y-%m-%d");let ne=[],K=[],F=[];function Z(p){const q=Kt.filter(D=>D.city===p);if(q){const D=q[0].region,w=g.find(C=>C.name===D);if(w)return w.colour}else return"white"}function se(){le=this.clientWidth,a(1,le)}return o.$$.update=()=>{o.$$.dirty&1024&&a(9,n=Kt.filter(p=>l.includes(p.region)).map(p=>p.city)),o.$$.dirty&736&&a(8,K=(()=>{if($!==null)return $;const p=ne.map(q=>{if(n.includes(q)){const D=U.filter(w=>{const C=new Date(w.date),O=new Date(V.day1),G=new Date(V.day2);return w.city===q&&C>=O&&C<=G});if(D.length>0){console.log("cityData");const w=D.map(d=>parseFloat(d.normalized_distinct_clean)),C=U.filter(d=>{const _=new Date(d.date);return _.getFullYear()===V.year1&&_.getMonth()===V.monthNumber-1&&d.city===q}),O=Nr(C,d=>parseFloat(d.normalized_distinct_clean)),G=U.filter(d=>{const _=new Date(d.date);return _.getFullYear()===V.year2&&_.getMonth()===V.monthNumber-1&&d.city===q}),Y=Nr(G,d=>parseFloat(d.normalized_distinct_clean)),W=Gr().x(d=>J(d.date)).y(d=>parseFloat(d.normalized_distinct_clean)).bandwidth(.028),I=Math.min(...W(D).map(d=>d[1]),Yr(w)),L=Math.max(...W(D).map(d=>d[1]),Qr(w)),ee=Xr().domain([new Date(V.day1),new Date(V.day2)]).range([ua,X-ha]),E=Zr().domain([I,L]).range([ze-da,ca]),te=ta().x(d=>ee(d[0])).y(d=>E(d[1]))(W(D));q==="Quebec"&&(console.log(D),console.log(W(D)),console.log(L));const T=(Y-O)/O*100,y=T.toFixed(1)+"%",Q=W(D)[0],u={cx:ee(Q[0]),cy:E(Q[1]),radius:6,fill:"red",stroke:"red","stroke-width":2},x=W(D)[393],de={cx:ee(x[0]),cy:E(x[1]),radius:6,fill:"red",stroke:"#6aa687","stroke-width":2},M=E(O);return{city:q,regressionLine:te,meanLine:M,startCircle:u,endCircle:de,perChangeDisplay:y,percentageChange:T}}}}).filter(q=>q!==void 0);return p.length>0&&(a(5,$=p),setTimeout(()=>{a(0,k=!1)},0)),p})()),o.$$.dirty&256&&a(2,F=K.slice().sort((p,q)=>q.percentageChange-p.percentageChange))},[k,le,F,V,Z,$,U,ne,K,n,l,se]}class Ca extends qr{constructor(r){super(),Rr(this,r,fa,ia,zr,{})}}export{Ca as component,Da as universal};
