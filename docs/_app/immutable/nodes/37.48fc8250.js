import{S as Dn,i as Ln,s as An,y as Vn,a as O,k as m,q as v,K as I,z as Pn,c as G,l as w,m as f,r as d,h as s,L as M,n as e,_ as at,A as Tn,b as T,C as l,N as Tt,u as $e,g as In,d as Mn,B as Sn,M as It,P as bn,o as Rn,e as Se,p as le,D as pt,V as Nn,X as Bn,J as pr}from"../chunks/index.5885d984.js";import{H as On}from"../chunks/global.4dde8b47.js";import"../chunks/transform.4d2927c0.js";import{m as xe,l as dr,d as Cn,u as En}from"../chunks/red-arrow.6fc67973.js";import{c as Gn}from"../chunks/stores.01dfc0ed.js";import{l as ln}from"../chunks/linear.6154f0ba.js";import{c as nn}from"../chunks/csv.3ac754ad.js";import{t as Hn,l as Yt}from"../chunks/line.277d9777.js";const Un=!0,pi=Object.freeze(Object.defineProperty({__proto__:null,prerender:Un},Symbol.toStringTag,{value:"Module"}));function an(r,t,n){const i=r.slice();return i[38]=t[n],i[40]=n,i}function sn(r,t,n){const i=r.slice();return i[41]=t[n],i}function on(r,t,n){const i=r.slice();return i[44]=t[n],i}function cn(r,t,n){const i=r.slice();return i[47]=t[n],i}function un(r,t,n){const i=r.slice();return i[44]=t[n],i}function hn(r,t,n){const i=r.slice();return i[52]=t[n],i[40]=n,i}function fn(r,t,n){const i=r.slice();return i[41]=t[n],i}function qn(r){let t,n,i,a,c,o=r[12].year1+"",u,h,b,p,A,R,N,q,K,H,E,j,S,W,ne,z,J,Z,L,B,re,y=r[13],C=[];for(let D=0;D<y.length;D+=1)C[D]=vn(fn(r,y,D));return{c(){t=m("div"),n=m("div"),i=I("svg"),a=I("line"),c=O(),u=v(o),h=v(" average"),b=O();for(let D=0;D<C.length;D+=1)C[D].c();p=O(),A=m("button"),R=v("All"),N=O(),q=m("button"),K=v("Clear"),H=O(),E=m("h2"),j=v(`Work = residents who work downtown\r
          `),S=m("br"),W=v(`\r
          Home = residents who live downtown\r
          `),ne=m("br"),z=v(`\r
          Visitor = residents who neither work nor live downtown\r
          `),J=m("br"),Z=m("br"),L=v(`\r
          Note: Activity percentages do not add up to the overall percentage as\r
          activities are weighted equally.`),this.h()},l(D){t=w(D,"DIV",{style:!0});var P=f(t);n=w(P,"DIV",{style:!0});var k=f(n);i=M(k,"svg",{height:!0,width:!0});var U=f(i);a=M(U,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0}),f(a).forEach(s),U.forEach(s),c=G(k),u=d(k,o),h=d(k," average"),k.forEach(s),b=G(P);for(let fe=0;fe<C.length;fe+=1)C[fe].l(P);p=G(P),A=w(P,"BUTTON",{class:!0});var Y=f(A);R=d(Y,"All"),Y.forEach(s),N=G(P),q=w(P,"BUTTON",{class:!0});var Q=f(q);K=d(Q,"Clear"),Q.forEach(s),H=G(P),E=w(P,"H2",{class:!0});var te=f(E);j=d(te,`Work = residents who work downtown\r
          `),S=w(te,"BR",{}),W=d(te,`\r
          Home = residents who live downtown\r
          `),ne=w(te,"BR",{}),z=d(te,`\r
          Visitor = residents who neither work nor live downtown\r
          `),J=w(te,"BR",{}),Z=w(te,"BR",{}),L=d(te,`\r
          Note: Activity percentages do not add up to the overall percentage as\r
          activities are weighted equally.`),te.forEach(s),P.forEach(s),this.h()},h(){e(a,"x1","0"),e(a,"y1","5"),e(a,"x2","50"),e(a,"y2","5"),e(a,"stroke","white"),e(a,"stroke-width","1"),e(a,"stroke-dasharray","3"),e(i,"height","10"),e(i,"width","50"),le(n,"display","flex"),le(n,"align-items","center"),le(n,"gap","8px"),e(A,"class","filter-btn svelte-1v7vl4n"),e(q,"class","filter-btn svelte-1v7vl4n"),e(E,"class","textLabelTiny svelte-1v7vl4n"),le(t,"display","flex"),le(t,"align-items","center"),le(t,"gap","10px"),le(t,"padding","10px 0"),le(t,"flex-wrap","wrap")},m(D,P){T(D,t,P),l(t,n),l(n,i),l(i,a),l(n,c),l(n,u),l(n,h),l(t,b);for(let k=0;k<C.length;k+=1)C[k]&&C[k].m(t,null);l(t,p),l(t,A),l(A,R),l(t,N),l(t,q),l(q,K),l(t,H),l(t,E),l(E,j),l(E,S),l(E,W),l(E,ne),l(E,z),l(E,J),l(E,Z),l(E,L),B||(re=[Tt(A,"click",r[17]),Tt(q,"click",r[18])],B=!0)},p(D,P){if(P[0]&122896){y=D[13];let k;for(k=0;k<y.length;k+=1){const U=fn(D,y,k);C[k]?C[k].p(U,P):(C[k]=vn(U),C[k].c(),C[k].m(t,p))}for(;k<C.length;k+=1)C[k].d(1);C.length=y.length}},d(D){D&&s(t),It(C,D),B=!1,bn(re)}}}function Fn(r){let t,n,i,a,c,o=r[12].year1+"",u,h,b,p,A,R,N,q=r[12].year1+"",K,H,E,j,S,W,ne=r[12].year2+"",z,J,Z,L,B,re,y=r[12].year3+"",C;return{c(){t=m("div"),n=m("div"),i=I("svg"),a=I("line"),c=O(),u=v(o),h=v(" average"),b=O(),p=m("div"),A=I("svg"),R=I("line"),N=O(),K=v(q),H=O(),E=m("div"),j=I("svg"),S=I("line"),W=O(),z=v(ne),J=O(),Z=m("div"),L=I("svg"),B=I("line"),re=O(),C=v(y),this.h()},l(D){t=w(D,"DIV",{style:!0});var P=f(t);n=w(P,"DIV",{style:!0});var k=f(n);i=M(k,"svg",{height:!0,width:!0});var U=f(i);a=M(U,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0}),f(a).forEach(s),U.forEach(s),c=G(k),u=d(k,o),h=d(k," average"),k.forEach(s),b=G(P),p=w(P,"DIV",{style:!0});var Y=f(p);A=M(Y,"svg",{height:!0,width:!0});var Q=f(A);R=M(Q,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),f(R).forEach(s),Q.forEach(s),N=G(Y),K=d(Y,q),Y.forEach(s),H=G(P),E=w(P,"DIV",{style:!0});var te=f(E);j=M(te,"svg",{height:!0,width:!0});var fe=f(j);S=M(fe,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),f(S).forEach(s),fe.forEach(s),W=G(te),z=d(te,ne),te.forEach(s),J=G(P),Z=w(P,"DIV",{style:!0});var ge=f(Z);L=M(ge,"svg",{height:!0,width:!0});var Ve=f(L);B=M(Ve,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),f(B).forEach(s),Ve.forEach(s),re=G(ge),C=d(ge,y),ge.forEach(s),P.forEach(s),this.h()},h(){e(a,"x1","0"),e(a,"y1","5"),e(a,"x2","50"),e(a,"y2","5"),e(a,"stroke","white"),e(a,"stroke-width","1"),e(a,"stroke-dasharray","3"),e(i,"height","10"),e(i,"width","50"),le(n,"display","flex"),le(n,"align-items","center"),le(n,"gap","8px"),e(R,"x1","0"),e(R,"y1","5"),e(R,"x2","50"),e(R,"y2","5"),e(R,"stroke","var(--brandPink)"),e(R,"stroke-width","2"),e(A,"height","10"),e(A,"width","50"),le(p,"display","flex"),le(p,"align-items","center"),le(p,"gap","8px"),e(S,"x1","0"),e(S,"y1","5"),e(S,"x2","50"),e(S,"y2","5"),e(S,"stroke","var(--brandMedGreen)"),e(S,"stroke-width","2"),e(j,"height","10"),e(j,"width","50"),le(E,"display","flex"),le(E,"align-items","center"),le(E,"gap","8px"),e(B,"x1","0"),e(B,"y1","5"),e(B,"x2","50"),e(B,"y2","5"),e(B,"stroke","var(--brandRed)"),e(B,"stroke-width","2"),e(L,"height","10"),e(L,"width","50"),le(Z,"display","flex"),le(Z,"align-items","center"),le(Z,"gap","8px"),le(t,"display","flex"),le(t,"align-items","center"),le(t,"gap","20px"),le(t,"padding","10px 0"),le(t,"flex-wrap","wrap")},m(D,P){T(D,t,P),l(t,n),l(n,i),l(i,a),l(n,c),l(n,u),l(n,h),l(t,b),l(t,p),l(p,A),l(A,R),l(p,N),l(p,K),l(t,H),l(t,E),l(E,j),l(j,S),l(E,W),l(E,z),l(t,J),l(t,Z),l(Z,L),l(L,B),l(Z,re),l(Z,C)},p:pt,d(D){D&&s(t)}}}function vn(r){let t,n,i,a,c=r[15][r[41]]+"",o,u,h;function b(){return r[32](r[41])}return{c(){t=m("button"),n=I("svg"),i=I("line"),a=O(),o=v(c),this.h()},l(p){t=w(p,"BUTTON",{class:!0,style:!0});var A=f(t);n=M(A,"svg",{height:!0,width:!0});var R=f(n);i=M(R,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),f(i).forEach(s),R.forEach(s),a=G(A),o=d(A,c),A.forEach(s),this.h()},h(){e(i,"x1","0"),e(i,"y1","5"),e(i,"x2","30"),e(i,"y2","5"),e(i,"stroke",r[14][r[41]]),e(i,"stroke-width","2"),e(n,"height","10"),e(n,"width","30"),e(t,"class","activity-legend-btn svelte-1v7vl4n"),le(t,"--activity-color",r[14][r[41]]),at(t,"active",r[4].includes(r[41]))},m(p,A){T(p,t,A),l(t,n),l(n,i),l(t,a),l(t,o),u||(h=Tt(t,"click",b),u=!0)},p(p,A){r=p,A[0]&8208&&at(t,"active",r[4].includes(r[41]))},d(p){p&&s(t),u=!1,h()}}}function Wn(r){let t,n,i,a=r[1]==="2025vs2023"?`${r[12].year3} vs. ${r[12].year1}`:`${r[12].year3} vs. ${r[12].year2}`,c;return{c(){t=I("text"),n=v("% Change by Visitor"),i=I("text"),c=v(a),this.h()},l(o){t=M(o,"text",{x:!0,y:!0,class:!0});var u=f(t);n=d(u,"% Change by Visitor"),u.forEach(s),i=M(o,"text",{x:!0,y:!0,class:!0});var h=f(i);c=d(h,a),h.forEach(s),this.h()},h(){e(t,"x","235"),e(t,"y","20"),e(t,"class","textLabel svelte-1v7vl4n"),e(i,"x","235"),e(i,"y","38"),e(i,"class","textLabel svelte-1v7vl4n")},m(o,u){T(o,t,u),l(t,n),T(o,i,u),l(i,c)},p(o,u){u[0]&2&&a!==(a=o[1]==="2025vs2023"?`${o[12].year3} vs. ${o[12].year1}`:`${o[12].year3} vs. ${o[12].year2}`)&&$e(c,a)},d(o){o&&s(t),o&&s(i)}}}function zn(r){let t,n,i,a=r[1]==="2025vs2023"?`${r[12].year3} vs. ${r[12].year1}`:`${r[12].year3} vs. ${r[12].year2}`,c;return{c(){t=I("text"),n=v("% Change in Unique Devices"),i=I("text"),c=v(a),this.h()},l(o){t=M(o,"text",{x:!0,y:!0,class:!0});var u=f(t);n=d(u,"% Change in Unique Devices"),u.forEach(s),i=M(o,"text",{x:!0,y:!0,class:!0});var h=f(i);c=d(h,a),h.forEach(s),this.h()},h(){e(t,"x","235"),e(t,"y","15"),e(t,"class","textLabelSmall svelte-1v7vl4n"),e(i,"x","235"),e(i,"y","38"),e(i,"class","textLabel svelte-1v7vl4n")},m(o,u){T(o,t,u),l(t,n),T(o,i,u),l(i,c)},p(o,u){u[0]&2&&a!==(a=o[1]==="2025vs2023"?`${o[12].year3} vs. ${o[12].year1}`:`${o[12].year3} vs. ${o[12].year2}`)&&$e(c,a)},d(o){o&&s(t),o&&s(i)}}}function dn(r){let t,n,i;return{c(){t=I("line"),n=I("text"),i=v(r[52]),this.h()},l(a){t=M(a,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),f(t).forEach(s),n=M(a,"text",{x:!0,y:!0,class:!0});var c=f(n);i=d(c,r[52]),c.forEach(s),this.h()},h(){e(t,"x1",260+r[44]*(oe/3)+r[40]*oe/3/4),e(t,"y1",45),e(t,"x2",260+r[44]*(oe/3)+r[40]*oe/3/4),e(t,"y2",40),e(t,"stroke","white"),e(t,"stroke-width","1"),e(n,"x",260+r[44]*(oe/3)+r[40]*oe/3/4+oe/3/8),e(n,"y","40"),e(n,"class","textMonth svelte-1v7vl4n")},m(a,c){T(a,t,c),T(a,n,c),l(n,i)},p:pt,d(a){a&&s(t),a&&s(n)}}}function Yn(r){let t;return{c(){t=I("line"),this.h()},l(n){t=M(n,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),f(t).forEach(s),this.h()},h(){e(t,"x1",260+(r[44]+1)*(oe/3)),e(t,"y1",5),e(t,"x2",260+(r[44]+1)*(oe/3)),e(t,"y2",45),e(t,"stroke","white"),e(t,"stroke-width","2")},m(n,i){T(n,t,i)},p:pt,d(n){n&&s(t)}}}function _n(r){let t,n=2023+r[44]+"",i,a,c=[9,10,11,12],o=[];for(let h=0;h<4;h+=1)o[h]=dn(hn(r,c,h));let u=r[44]<2&&Yn(r);return{c(){for(let h=0;h<4;h+=1)o[h].c();t=I("text"),i=v(n),u&&u.c(),a=Se(),this.h()},l(h){for(let p=0;p<4;p+=1)o[p].l(h);t=M(h,"text",{x:!0,y:!0,class:!0});var b=f(t);i=d(b,n),b.forEach(s),u&&u.l(h),a=Se(),this.h()},h(){e(t,"x",260+r[44]*(oe/3)+oe/6),e(t,"y","20"),e(t,"class","textYear svelte-1v7vl4n")},m(h,b){for(let p=0;p<4;p+=1)o[p]&&o[p].m(h,b);T(h,t,b),l(t,i),u&&u.m(h,b),T(h,a,b)},p(h,b){if(b&0){c=[9,10,11,12];let p;for(p=0;p<4;p+=1){const A=hn(h,c,p);o[p]?o[p].p(A,b):(o[p]=dn(A),o[p].c(),o[p].m(t.parentNode,t))}for(;p<4;p+=1)o[p].d(1)}h[44]<2&&u.p(h,b)},d(h){It(o,h),h&&s(t),u&&u.d(h),h&&s(a)}}}function Kn(r){let t,n=r[5],i=[];for(let a=0;a<n.length;a+=1)i[a]=mn(an(r,n,a));return{c(){for(let a=0;a<i.length;a+=1)i[a].c();t=Se()},l(a){for(let c=0;c<i.length;c+=1)i[c].l(a);t=Se()},m(a,c){for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(a,c);T(a,t,c)},p(a,c){if(c[0]&16499){n=a[5];let o;for(o=0;o<n.length;o+=1){const u=an(a,n,o);i[o]?i[o].p(u,c):(i[o]=mn(u),i[o].c(),i[o].m(t.parentNode,t))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},d(a){It(i,a),a&&s(t)}}}function Jn(r){let t,n,i,a;function c(h,b){if(h[2])return ii;if(h[3])return ni}let o=c(r),u=o&&o(r);return{c(){t=m("div"),n=m("div"),i=O(),a=m("p"),u&&u.c(),this.h()},l(h){t=w(h,"DIV",{class:!0});var b=f(t);n=w(b,"DIV",{class:!0}),f(n).forEach(s),i=G(b),a=w(b,"P",{class:!0});var p=f(a);u&&u.l(p),p.forEach(s),b.forEach(s),this.h()},h(){e(n,"class","loading-spinner svelte-1v7vl4n"),e(a,"class","loading-text svelte-1v7vl4n"),e(t,"class","loading-container svelte-1v7vl4n")},m(h,b){T(h,t,b),l(t,n),l(t,i),l(t,a),u&&u.m(a,null)},p(h,b){o!==(o=c(h))&&(u&&u.d(1),u=o&&o(h),u&&(u.c(),u.m(a,null)))},d(h){h&&s(t),u&&u.d()}}}function jn(r){let t,n;return{c(){t=m("img"),this.h()},l(i){t=w(i,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){pr(t.src,n=Cn)||e(t,"src",n),e(t,"alt","Down arrow"),e(t,"class","arrow-icon svelte-1v7vl4n")},m(i,a){T(i,t,a)},p:pt,d(i){i&&s(t)}}}function Xn(r){let t,n;return{c(){t=m("img"),this.h()},l(i){t=w(i,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){pr(t.src,n=En)||e(t,"src",n),e(t,"alt","Up arrow"),e(t,"class","arrow-icon svelte-1v7vl4n")},m(i,a){T(i,t,a)},p:pt,d(i){i&&s(t)}}}function Qn(r){let t;function n(c,o){return c[38].percentageChange2025vs2023>=0?xn:Zn}let i=n(r),a=i(r);return{c(){a.c(),t=Se()},l(c){a.l(c),t=Se()},m(c,o){a.m(c,o),T(c,t,o)},p(c,o){i===(i=n(c))&&a?a.p(c,o):(a.d(1),a=i(c),a&&(a.c(),a.m(t.parentNode,t)))},d(c){a.d(c),c&&s(t)}}}function Zn(r){let t,n;return{c(){t=m("img"),this.h()},l(i){t=w(i,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){pr(t.src,n=Cn)||e(t,"src",n),e(t,"alt","Down arrow"),e(t,"class","arrow-icon svelte-1v7vl4n")},m(i,a){T(i,t,a)},p:pt,d(i){i&&s(t)}}}function xn(r){let t,n;return{c(){t=m("img"),this.h()},l(i){t=w(i,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){pr(t.src,n=En)||e(t,"src",n),e(t,"alt","Up arrow"),e(t,"class","arrow-icon svelte-1v7vl4n")},m(i,a){T(i,t,a)},p:pt,d(i){i&&s(t)}}}function $n(r){let t,n=r[4].length>0?(r[4].reduce(a,0)/r[4].length).toFixed(1)+"%":"N/A",i;function a(...c){return r[33](r[38],...c)}return{c(){t=m("span"),i=v(n),this.h()},l(c){t=w(c,"SPAN",{class:!0});var o=f(t);i=d(o,n),o.forEach(s),this.h()},h(){e(t,"class","percent-main svelte-1v7vl4n")},m(c,o){T(c,t,o),l(t,i)},p(c,o){r=c,o[0]&50&&n!==(n=r[4].length>0?(r[4].reduce(a,0)/r[4].length).toFixed(1)+"%":"N/A")&&$e(i,n)},d(c){c&&s(t)}}}function ei(r){let t,n=(r[1]==="2025vs2023"?r[38].perChange2025Display:r[38].perChange2024Display)+"",i;return{c(){t=m("span"),i=v(n),this.h()},l(a){t=w(a,"SPAN",{class:!0});var c=f(t);i=d(c,n),c.forEach(s),this.h()},h(){e(t,"class","percent-main svelte-1v7vl4n")},m(a,c){T(a,t,c),l(t,i)},p(a,c){c[0]&34&&n!==(n=(a[1]==="2025vs2023"?a[38].perChange2025Display:a[38].perChange2024Display)+"")&&$e(i,n)},d(a){a&&s(t)}}}function pn(r){let t;return{c(){t=I("line"),this.h()},l(n){t=M(n,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),f(t).forEach(s),this.h()},h(){e(t,"x1",r[44]*(oe/3)+r[47]*oe/3/4),e(t,"y1",5),e(t,"x2",r[44]*(oe/3)+r[47]*oe/3/4),e(t,"y2",45),e(t,"stroke","#333333"),e(t,"stroke-width","1")},m(n,i){T(n,t,i)},p:pt,d(n){n&&s(t)}}}function ti(r){let t;return{c(){t=I("line"),this.h()},l(n){t=M(n,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),f(t).forEach(s),this.h()},h(){e(t,"x1",(r[44]+1)*(oe/3)),e(t,"y1",5),e(t,"x2",(r[44]+1)*(oe/3)),e(t,"y2",45),e(t,"stroke","#555555"),e(t,"stroke-width","2")},m(n,i){T(n,t,i)},p:pt,d(n){n&&s(t)}}}function yn(r){let t,n,i=[1,2,3],a=[];for(let o=0;o<3;o+=1)a[o]=pn(cn(r,i,o));let c=r[44]<2&&ti(r);return{c(){for(let o=0;o<3;o+=1)a[o].c();t=Se(),c&&c.c(),n=Se()},l(o){for(let u=0;u<3;u+=1)a[u].l(o);t=Se(),c&&c.l(o),n=Se()},m(o,u){for(let h=0;h<3;h+=1)a[h]&&a[h].m(o,u);T(o,t,u),c&&c.m(o,u),T(o,n,u)},p(o,u){if(u&0){i=[1,2,3];let h;for(h=0;h<3;h+=1){const b=cn(o,i,h);a[h]?a[h].p(b,u):(a[h]=pn(b),a[h].c(),a[h].m(t.parentNode,t))}for(;h<3;h+=1)a[h].d(1)}o[44]<2&&c.p(o,u)},d(o){It(a,o),o&&s(t),c&&c.d(o),o&&s(n)}}}function ri(r){let t,n,i,a,c=r[4],o=[];for(let u=0;u<c.length;u+=1)o[u]=gn(sn(r,c,u));return{c(){t=I("line");for(let u=0;u<o.length;u+=1)o[u].c();a=Se(),this.h()},l(u){t=M(u,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0}),f(t).forEach(s);for(let h=0;h<o.length;h+=1)o[h].l(u);a=Se(),this.h()},h(){e(t,"x1","0"),e(t,"y1",n=r[38].meanLine),e(t,"x2",oe),e(t,"y2",i=r[38].meanLine),e(t,"stroke","#D0D1C9"),e(t,"stroke-width","1"),e(t,"stroke-dasharray","4")},m(u,h){T(u,t,h);for(let b=0;b<o.length;b+=1)o[b]&&o[b].m(u,h);T(u,a,h)},p(u,h){if(h[0]&32&&n!==(n=u[38].meanLine)&&e(t,"y1",n),h[0]&32&&i!==(i=u[38].meanLine)&&e(t,"y2",i),h[0]&16432){c=u[4];let b;for(b=0;b<c.length;b+=1){const p=sn(u,c,b);o[b]?o[b].p(p,h):(o[b]=gn(p),o[b].c(),o[b].m(a.parentNode,a))}for(;b<o.length;b+=1)o[b].d(1);o.length=c.length}},d(u){u&&s(t),It(o,u),u&&s(a)}}}function li(r){let t,n,i,a,c,o,u,h,b,p,A,R,N,q,K,H,E,j,S,W,ne,z,J,Z,L,B,re;return{c(){t=I("line"),a=I("path"),o=I("path"),h=I("path"),p=I("circle"),N=I("circle"),H=I("circle"),S=I("circle"),z=I("circle"),L=I("circle"),this.h()},l(y){t=M(y,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0}),f(t).forEach(s),a=M(y,"path",{d:!0,stroke:!0,"stroke-width":!0,fill:!0}),f(a).forEach(s),o=M(y,"path",{d:!0,stroke:!0,"stroke-width":!0,fill:!0}),f(o).forEach(s),h=M(y,"path",{d:!0,stroke:!0,"stroke-width":!0,fill:!0}),f(h).forEach(s),p=M(y,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),f(p).forEach(s),N=M(y,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),f(N).forEach(s),H=M(y,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),f(H).forEach(s),S=M(y,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),f(S).forEach(s),z=M(y,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),f(z).forEach(s),L=M(y,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),f(L).forEach(s),this.h()},h(){e(t,"x1","0"),e(t,"y1",n=r[38].meanLine),e(t,"x2",oe),e(t,"y2",i=r[38].meanLine),e(t,"stroke","#D0D1C9"),e(t,"stroke-width","1"),e(t,"stroke-dasharray","4"),e(a,"d",c=r[38].regressionLine2023),e(a,"stroke","var(--brandPink)"),e(a,"stroke-width","2"),e(a,"fill","none"),e(o,"d",u=r[38].regressionLine2024),e(o,"stroke","var(--brandMedGreen)"),e(o,"stroke-width","2"),e(o,"fill","none"),e(h,"d",b=r[38].regressionLine2025),e(h,"stroke","var(--brandRed)"),e(h,"stroke-width","2"),e(h,"fill","none"),e(p,"cx",A=r[38].startCircle2023.cx),e(p,"cy",R=r[38].startCircle2023.cy),e(p,"r","1"),e(p,"fill","var(--brandPink)"),e(p,"stroke","var(--brandPink)"),e(p,"stroke-width","2"),e(N,"cx",q=r[38].endCircle2023.cx),e(N,"cy",K=r[38].endCircle2023.cy),e(N,"r","1"),e(N,"fill","var(--brandPink)"),e(N,"stroke","var(--brandPink)"),e(N,"stroke-width","2"),e(H,"cx",E=r[38].startCircle2024.cx),e(H,"cy",j=r[38].startCircle2024.cy),e(H,"r","1"),e(H,"fill","var(--brandMedGreen)"),e(H,"stroke","var(--brandMedGreen)"),e(H,"stroke-width","2"),e(S,"cx",W=r[38].endCircle2024.cx),e(S,"cy",ne=r[38].endCircle2024.cy),e(S,"r","1"),e(S,"fill","var(--brandMedGreen)"),e(S,"stroke","var(--brandMedGreen)"),e(S,"stroke-width","2"),e(z,"cx",J=r[38].startCircle2025.cx),e(z,"cy",Z=r[38].startCircle2025.cy),e(z,"r","1"),e(z,"fill","var(--brandRed)"),e(z,"stroke","var(--brandRed)"),e(z,"stroke-width","2"),e(L,"cx",B=r[38].endCircle2025.cx),e(L,"cy",re=r[38].endCircle2025.cy),e(L,"r","1"),e(L,"fill","var(--brandRed)"),e(L,"stroke","var(--brandRed)"),e(L,"stroke-width","2")},m(y,C){T(y,t,C),T(y,a,C),T(y,o,C),T(y,h,C),T(y,p,C),T(y,N,C),T(y,H,C),T(y,S,C),T(y,z,C),T(y,L,C)},p(y,C){C[0]&32&&n!==(n=y[38].meanLine)&&e(t,"y1",n),C[0]&32&&i!==(i=y[38].meanLine)&&e(t,"y2",i),C[0]&32&&c!==(c=y[38].regressionLine2023)&&e(a,"d",c),C[0]&32&&u!==(u=y[38].regressionLine2024)&&e(o,"d",u),C[0]&32&&b!==(b=y[38].regressionLine2025)&&e(h,"d",b),C[0]&32&&A!==(A=y[38].startCircle2023.cx)&&e(p,"cx",A),C[0]&32&&R!==(R=y[38].startCircle2023.cy)&&e(p,"cy",R),C[0]&32&&q!==(q=y[38].endCircle2023.cx)&&e(N,"cx",q),C[0]&32&&K!==(K=y[38].endCircle2023.cy)&&e(N,"cy",K),C[0]&32&&E!==(E=y[38].startCircle2024.cx)&&e(H,"cx",E),C[0]&32&&j!==(j=y[38].startCircle2024.cy)&&e(H,"cy",j),C[0]&32&&W!==(W=y[38].endCircle2024.cx)&&e(S,"cx",W),C[0]&32&&ne!==(ne=y[38].endCircle2024.cy)&&e(S,"cy",ne),C[0]&32&&J!==(J=y[38].startCircle2025.cx)&&e(z,"cx",J),C[0]&32&&Z!==(Z=y[38].startCircle2025.cy)&&e(z,"cy",Z),C[0]&32&&B!==(B=y[38].endCircle2025.cx)&&e(L,"cx",B),C[0]&32&&re!==(re=y[38].endCircle2025.cy)&&e(L,"cy",re)},d(y){y&&s(t),y&&s(a),y&&s(o),y&&s(h),y&&s(p),y&&s(N),y&&s(H),y&&s(S),y&&s(z),y&&s(L)}}}function gn(r){let t,n,i,a,c,o,u,h,b,p,A,R,N,q,K,H,E,j,S,W,ne,z,J,Z,L,B,re,y,C,D,P,k,U,Y,Q,te,fe,ge,Ve;return{c(){t=I("path"),a=I("path"),u=I("path"),p=I("circle"),K=I("circle"),W=I("circle"),L=I("circle"),D=I("circle"),Q=I("circle"),this.h()},l(_){t=M(_,"path",{d:!0,stroke:!0,"stroke-width":!0,fill:!0}),f(t).forEach(s),a=M(_,"path",{d:!0,stroke:!0,"stroke-width":!0,fill:!0}),f(a).forEach(s),u=M(_,"path",{d:!0,stroke:!0,"stroke-width":!0,fill:!0}),f(u).forEach(s),p=M(_,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),f(p).forEach(s),K=M(_,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),f(K).forEach(s),W=M(_,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),f(W).forEach(s),L=M(_,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),f(L).forEach(s),D=M(_,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),f(D).forEach(s),Q=M(_,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),f(Q).forEach(s),this.h()},h(){e(t,"d",n=r[38].activityLines[r[41]].line2023),e(t,"stroke",i=r[14][r[41]]),e(t,"stroke-width","2"),e(t,"fill","none"),e(a,"d",c=r[38].activityLines[r[41]].line2024),e(a,"stroke",o=r[14][r[41]]),e(a,"stroke-width","2"),e(a,"fill","none"),e(u,"d",h=r[38].activityLines[r[41]].line2025),e(u,"stroke",b=r[14][r[41]]),e(u,"stroke-width","2"),e(u,"fill","none"),e(p,"cx",A=r[38].activityLines[r[41]].startCircle2023.cx),e(p,"cy",R=r[38].activityLines[r[41]].startCircle2023.cy),e(p,"r","1"),e(p,"fill",N=r[14][r[41]]),e(p,"stroke",q=r[14][r[41]]),e(p,"stroke-width","2"),e(K,"cx",H=r[38].activityLines[r[41]].endCircle2023.cx),e(K,"cy",E=r[38].activityLines[r[41]].endCircle2023.cy),e(K,"r","1"),e(K,"fill",j=r[14][r[41]]),e(K,"stroke",S=r[14][r[41]]),e(K,"stroke-width","2"),e(W,"cx",ne=r[38].activityLines[r[41]].startCircle2024.cx),e(W,"cy",z=r[38].activityLines[r[41]].startCircle2024.cy),e(W,"r","1"),e(W,"fill",J=r[14][r[41]]),e(W,"stroke",Z=r[14][r[41]]),e(W,"stroke-width","2"),e(L,"cx",B=r[38].activityLines[r[41]].endCircle2024.cx),e(L,"cy",re=r[38].activityLines[r[41]].endCircle2024.cy),e(L,"r","1"),e(L,"fill",y=r[14][r[41]]),e(L,"stroke",C=r[14][r[41]]),e(L,"stroke-width","2"),e(D,"cx",P=r[38].activityLines[r[41]].startCircle2025.cx),e(D,"cy",k=r[38].activityLines[r[41]].startCircle2025.cy),e(D,"r","1"),e(D,"fill",U=r[14][r[41]]),e(D,"stroke",Y=r[14][r[41]]),e(D,"stroke-width","2"),e(Q,"cx",te=r[38].activityLines[r[41]].endCircle2025.cx),e(Q,"cy",fe=r[38].activityLines[r[41]].endCircle2025.cy),e(Q,"r","1"),e(Q,"fill",ge=r[14][r[41]]),e(Q,"stroke",Ve=r[14][r[41]]),e(Q,"stroke-width","2")},m(_,g){T(_,t,g),T(_,a,g),T(_,u,g),T(_,p,g),T(_,K,g),T(_,W,g),T(_,L,g),T(_,D,g),T(_,Q,g)},p(_,g){g[0]&48&&n!==(n=_[38].activityLines[_[41]].line2023)&&e(t,"d",n),g[0]&16&&i!==(i=_[14][_[41]])&&e(t,"stroke",i),g[0]&48&&c!==(c=_[38].activityLines[_[41]].line2024)&&e(a,"d",c),g[0]&16&&o!==(o=_[14][_[41]])&&e(a,"stroke",o),g[0]&48&&h!==(h=_[38].activityLines[_[41]].line2025)&&e(u,"d",h),g[0]&16&&b!==(b=_[14][_[41]])&&e(u,"stroke",b),g[0]&48&&A!==(A=_[38].activityLines[_[41]].startCircle2023.cx)&&e(p,"cx",A),g[0]&48&&R!==(R=_[38].activityLines[_[41]].startCircle2023.cy)&&e(p,"cy",R),g[0]&16&&N!==(N=_[14][_[41]])&&e(p,"fill",N),g[0]&16&&q!==(q=_[14][_[41]])&&e(p,"stroke",q),g[0]&48&&H!==(H=_[38].activityLines[_[41]].endCircle2023.cx)&&e(K,"cx",H),g[0]&48&&E!==(E=_[38].activityLines[_[41]].endCircle2023.cy)&&e(K,"cy",E),g[0]&16&&j!==(j=_[14][_[41]])&&e(K,"fill",j),g[0]&16&&S!==(S=_[14][_[41]])&&e(K,"stroke",S),g[0]&48&&ne!==(ne=_[38].activityLines[_[41]].startCircle2024.cx)&&e(W,"cx",ne),g[0]&48&&z!==(z=_[38].activityLines[_[41]].startCircle2024.cy)&&e(W,"cy",z),g[0]&16&&J!==(J=_[14][_[41]])&&e(W,"fill",J),g[0]&16&&Z!==(Z=_[14][_[41]])&&e(W,"stroke",Z),g[0]&48&&B!==(B=_[38].activityLines[_[41]].endCircle2024.cx)&&e(L,"cx",B),g[0]&48&&re!==(re=_[38].activityLines[_[41]].endCircle2024.cy)&&e(L,"cy",re),g[0]&16&&y!==(y=_[14][_[41]])&&e(L,"fill",y),g[0]&16&&C!==(C=_[14][_[41]])&&e(L,"stroke",C),g[0]&48&&P!==(P=_[38].activityLines[_[41]].startCircle2025.cx)&&e(D,"cx",P),g[0]&48&&k!==(k=_[38].activityLines[_[41]].startCircle2025.cy)&&e(D,"cy",k),g[0]&16&&U!==(U=_[14][_[41]])&&e(D,"fill",U),g[0]&16&&Y!==(Y=_[14][_[41]])&&e(D,"stroke",Y),g[0]&48&&te!==(te=_[38].activityLines[_[41]].endCircle2025.cx)&&e(Q,"cx",te),g[0]&48&&fe!==(fe=_[38].activityLines[_[41]].endCircle2025.cy)&&e(Q,"cy",fe),g[0]&16&&ge!==(ge=_[14][_[41]])&&e(Q,"fill",ge),g[0]&16&&Ve!==(Ve=_[14][_[41]])&&e(Q,"stroke",Ve)},d(_){_&&s(t),_&&s(a),_&&s(u),_&&s(p),_&&s(K),_&&s(W),_&&s(L),_&&s(D),_&&s(Q)}}}function mn(r){let t,n,i,a,c,o=r[40]+1+"",u,h,b=r[38].city+"",p,A,R,N,q,K,H,E,j,S,W;function ne(k,U){return k[1]==="2025vs2023"?Qn:k[38].percentageChange2025vs2024>=0?Xn:jn}let z=ne(r),J=z(r);function Z(k,U){return k[0]==="overall"?ei:$n}let L=Z(r),B=L(r),re=[0,1,2],y=[];for(let k=0;k<3;k+=1)y[k]=yn(on(r,re,k));function C(k,U){return k[0]==="overall"?li:ri}let D=C(r),P=D(r);return{c(){t=m("div"),n=m("div"),i=I("svg"),a=I("line"),c=I("text"),u=v(o),h=v(". "),p=v(b),A=O(),R=m("div"),J.c(),N=O(),q=m("div"),B.c(),K=O(),H=m("div"),E=I("svg");for(let k=0;k<3;k+=1)y[k].c();j=Se(),P.c(),S=O(),this.h()},l(k){t=w(k,"DIV",{class:!0});var U=f(t);n=w(U,"DIV",{class:!0});var Y=f(n);i=M(Y,"svg",{width:!0,height:!0,class:!0});var Q=f(i);a=M(Q,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),f(a).forEach(s),c=M(Q,"text",{x:!0,y:!0,class:!0});var te=f(c);u=d(te,o),h=d(te,". "),p=d(te,b),te.forEach(s),Q.forEach(s),Y.forEach(s),A=G(U),R=w(U,"DIV",{class:!0});var fe=f(R);J.l(fe),fe.forEach(s),N=G(U),q=w(U,"DIV",{class:!0});var ge=f(q);B.l(ge),ge.forEach(s),K=G(U),H=w(U,"DIV",{class:!0,style:!0});var Ve=f(H);E=M(Ve,"svg",{height:!0,width:!0,class:!0});var _=f(E);for(let g=0;g<3;g+=1)y[g].l(_);j=Se(),P.l(_),_.forEach(s),Ve.forEach(s),S=G(U),U.forEach(s),this.h()},h(){e(a,"x1","5"),e(a,"y1","15"),e(a,"x2","5"),e(a,"y2",Jt-45),e(a,"stroke","#fff"),e(a,"stroke-width","5"),e(c,"x","12"),e(c,"y","31"),e(c,"class","textCity svelte-1v7vl4n"),e(i,"width","150"),e(i,"height",Jt),e(i,"class","region-bar"),e(n,"class","left svelte-1v7vl4n"),e(R,"class","arrow svelte-1v7vl4n"),e(q,"class","number svelte-1v7vl4n"),e(E,"height",Jt),e(E,"width",oe),e(E,"class","chart svelte-1v7vl4n"),e(H,"class","chart-container svelte-1v7vl4n"),le(H,"width",oe),e(t,"class","chart-wrapper svelte-1v7vl4n"),Nn(()=>r[34].call(t))},m(k,U){T(k,t,U),l(t,n),l(n,i),l(i,a),l(i,c),l(c,u),l(c,h),l(c,p),l(t,A),l(t,R),J.m(R,null),l(t,N),l(t,q),B.m(q,null),l(t,K),l(t,H),l(H,E);for(let Y=0;Y<3;Y+=1)y[Y]&&y[Y].m(E,null);l(E,j),P.m(E,null),l(t,S),W=Bn(t,r[34].bind(t))},p(k,U){if(U[0]&32&&b!==(b=k[38].city+"")&&$e(p,b),z===(z=ne(k))&&J?J.p(k,U):(J.d(1),J=z(k),J&&(J.c(),J.m(R,null))),L===(L=Z(k))&&B?B.p(k,U):(B.d(1),B=L(k),B&&(B.c(),B.m(q,null))),U&0){re=[0,1,2];let Y;for(Y=0;Y<3;Y+=1){const Q=on(k,re,Y);y[Y]?y[Y].p(Q,U):(y[Y]=yn(Q),y[Y].c(),y[Y].m(E,j))}for(;Y<3;Y+=1)y[Y].d(1)}D===(D=C(k))&&P?P.p(k,U):(P.d(1),P=D(k),P&&(P.c(),P.m(E,null)))},d(k){k&&s(t),J.d(),B.d(),It(y,k),P.d(),W()}}}function ni(r){let t;return{c(){t=v("Loading activity data (this may take a moment)...")},l(n){t=d(n,"Loading activity data (this may take a moment)...")},m(n,i){T(n,t,i)},d(n){n&&s(t)}}}function ii(r){let t;return{c(){t=v("Loading overall data...")},l(n){t=d(n,"Loading overall data...")},m(n,i){T(n,t,i)},d(n){n&&s(t)}}}function ai(r){var Ll,Al;let t,n,i,a,c,o,u,h,b,p,A,R,N,q,K,H,E,j,S,W,ne,z=r[12].update_date+"",J,Z,L,B,re,y,C,D,P,k,U=r[12].year3+"",Y,Q,te=r[12].year2+"",fe,ge,Ve=r[12].year1+"",_,g,ce,ie,Ge,ue=r[12].year1+"",Re,ve,Ee=r[12].year1+"",pe,ae,ye,De,me,et,he,We,se,X,ze,Te,Ne,de,Ye,Le,x,Pe,He=(((Ll=r[9])==null?void 0:Ll.toFixed(1))??"...")+"",Ke,tt,be,we,st,Ue,yt,Ce,gt,Mt,jt,ot,Ct=(((Al=r[7])==null?void 0:Al.toFixed(1))??"...")+"",St,Xt,Qt,sr=r[12].year1+"",F,Zt,Et,Ie,xt,ct,$t,er,or=r[12].year3+"",tr,yr,ml=r[12].year2+"",gr,mr,wr,mt,kr,Dt,br,Cr,Rt,Er,Dr,Je,ut,Lr,wl=r[12].year1+"",Ar,Vr,kl=r[12].year3+"",Pr,Tr,Ir,wt,rt,Nt,Mr,Sr,ht,Rr,Nr,ft,Br,Or,lt,Bt,Gr,Hr,vt,Ur,qr,dt,Fr,Wr,zr,Ot,_t,Gt,Ht,Be,kt,Yr,je,Kr,Jr,Ae,jr,Xr,Qr,Zr,rr,xr,$r,Oe,el,Lt,tl,rl,At,ll,nl,Vt,il,al,Pt,sl,ol,cl,ul,hl,fl,Me,vl,bl;t=new On({});function Cl(V,$){return V[0]==="overall"?Fn:qn}let cr=Cl(r),Xe=cr(r);function El(V,$){return V[0]==="overall"?zn:Wn}let ur=El(r),Qe=ur(r),dl=[0,1,2],qe=[];for(let V=0;V<3;V+=1)qe[V]=_n(un(r,dl,V));function Dl(V,$){return V[2]||V[3]?Jn:Kn}let hr=Dl(r),Ze=hr(r);return{c(){Vn(t.$$.fragment),n=O(),i=m("main"),a=m("div"),c=m("h1"),o=v("US Downtown Recovery Trends"),u=O(),h=m("p"),b=v("By "),p=m("a"),A=v("Karen Chapple"),R=v(`,\r
       `),N=m("a"),q=v("Yihoi Jung"),K=v(`,\r
      \r
      `),H=m("a"),E=v("Jeff Allen"),j=O(),S=m("p"),W=m("i"),ne=v("Updated "),J=v(z),Z=O(),L=m("p"),B=v(`Data on cell phone activity (a.k.a. footfall) trends for the last two\r
      years can provide a picture of how US downtowns are faring post-pandemic.`),re=O(),y=m("p"),C=v("On this page, we provide an update from "),D=m("a"),P=v("our previous trends analysis (2023-2024)"),k=v(`, specifically looking at\r
      year-over-year trends comparing September to December `),Y=v(U),Q=v(` to the same period in\r
      `),fe=v(te),ge=v(`\r
      and `),_=v(Ve),g=v("."),ce=O(),ie=m("p"),Ge=v(`The solid lines on the charts below represent the number of daily unique stops in the downtown\r
      area, split by the three years for comparison. The dotted lines provide a\r
      baseline of the average level of activity in\r
      `),Re=v(ue),ve=v(`, allowing for comparison to the following years. When\r
      the solid lines extend above the dotted baseline, downtown activity is\r
      greater compared to `),pe=v(Ee),ae=v(` months. When they dip below the dotted\r
      line, activity is on a downswing.`),ye=O(),De=m("p"),me=v(`There are two interactive toggle views at the top, one for view mode\r
      (Overall vs. By Visitor) and one for the percent change comparison. When\r
      "By Visitor" is selected, you can view by trends by those who A) work downtown B) live downtown and C) neither work nor live downtown.`),et=O(),he=m("h5"),We=v("Key findings:"),se=O(),X=m("p"),ze=v("‣ "),Te=m("span"),Ne=v(r[11]),de=v(` out of\r
      `),Ye=m("span"),Le=v(r[10]),x=v(`\r
      US cities rose in activity in 2025 compared to 2024, with a mean increase of\r
      `),Pe=m("span"),Ke=v(He),tt=v("%"),be=v(`.\r
      `),we=m("br"),st=v(`\r
      ‣ Compared to 2023, `),Ue=m("span"),yt=v(r[8]),Ce=v(` out of\r
      `),gt=m("span"),Mt=v(r[10]),jt=v(`\r
      cities saw increases, with a mean increase of\r
      `),ot=m("span"),St=v(Ct),Xt=v("%"),Qt=v(`,\r
      indicating that most downtowns are up from their `),F=v(sr),Zt=v(`\r
      activity levels.`),Et=O(),Ie=m("p"),xt=v("Note 1: Trends are based on a sample of data from "),ct=m("a"),$t=v("Cuebiq"),er=v(`, but use different cell\r
      phone data providers from our previous rankings analysis. The trendlines measure\r
      the average level of activity over the course of the year, while the\r
      ranking metric shows the percent difference in the average number of\r
      unique devices in `),tr=v(or),yr=v(" versus the same set of months in "),gr=v(ml),mr=v("."),wr=O(),mt=m("p"),kr=v("Note 2: Baltimore's data is cut off at 2023 "),Dt=m("a"),br=v(`due to data privacy\r
      restrictions`),Cr=v(`. Portland's data is cut off at mid-December 2025, due to \r
      `),Rt=m("a"),Er=v("Oregon's Consumer Privacy Act."),Dr=O(),Je=m("div"),ut=m("h4"),Lr=v("Unique Devices Downtown (September to December from "),Ar=v(wl),Vr=v(" to "),Pr=v(kl),Tr=v(")"),Ir=O(),wt=m("div"),rt=m("div"),Nt=m("span"),Mr=v("View mode:"),Sr=O(),ht=m("button"),Rr=v("Overall"),Nr=O(),ft=m("button"),Br=v("By Visitor"),Or=O(),lt=m("div"),Bt=m("span"),Gr=v("Compare:"),Hr=O(),vt=m("button"),Ur=v("2025 vs 2023"),qr=O(),dt=m("button"),Fr=v("2025 vs 2024"),Wr=O(),Xe.c(),zr=O(),Ot=m("div"),_t=m("div"),Gt=m("div"),Ht=m("div"),Be=I("svg"),kt=I("text"),Yr=v("City"),Qe.c(),je=I("line");for(let V=0;V<3;V+=1)qe[V].c();Kr=O(),Ze.c(),Jr=O(),Ae=m("div"),jr=m("br"),Xr=O(),Qr=m("br"),Zr=O(),rr=m("h4"),xr=v("More information"),$r=O(),Oe=m("p"),el=v("The trend lines are fit from daily data via a "),Lt=m("a"),tl=v("LOESS"),rl=v(`\r
      curve. You can download the raw daily data shown to fit these curves\r
      `),At=m("a"),ll=v("from this link for the data by visitor type"),nl=v(`\r
      and\r
      `),Vt=m("a"),il=v("from this link for the overall trends data"),al=v(`. The data on the charts are based on the \`normalized_distinct_clean\`\r
      column, which pertains to the number of unique daily devices normalized\r
      by the total number in the metro area. The trend-line and summary\r
      statistics shown are calculated in JavaScript (code is on\r
      `),Pt=m("a"),sl=v("GitHub"),ol=v(")."),cl=O(),ul=m("br"),hl=O(),fl=m("br"),this.h()},l(V){Pn(t.$$.fragment,V),n=G(V),i=w(V,"MAIN",{});var $=f(i);a=w($,"DIV",{class:!0});var ee=f(a);c=w(ee,"H1",{});var lr=f(c);o=d(lr,"US Downtown Recovery Trends"),lr.forEach(s),u=G(ee),h=w(ee,"P",{});var _e=f(h);b=d(_e,"By "),p=w(_e,"A",{href:!0,target:!0});var nr=f(p);A=d(nr,"Karen Chapple"),nr.forEach(s),R=d(_e,`,\r
       `),N=w(_e,"A",{href:!0,target:!0});var Vl=f(N);q=d(Vl,"Yihoi Jung"),Vl.forEach(s),K=d(_e,`,\r
      \r
      `),H=w(_e,"A",{href:!0,target:!0});var Pl=f(H);E=d(Pl,"Jeff Allen"),Pl.forEach(s),_e.forEach(s),j=G(ee),S=w(ee,"P",{});var Tl=f(S);W=w(Tl,"I",{});var _l=f(W);ne=d(_l,"Updated "),J=d(_l,z),_l.forEach(s),Tl.forEach(s),Z=G(ee),L=w(ee,"P",{});var Il=f(L);B=d(Il,`Data on cell phone activity (a.k.a. footfall) trends for the last two\r
      years can provide a picture of how US downtowns are faring post-pandemic.`),Il.forEach(s),re=G(ee),y=w(ee,"P",{});var nt=f(y);C=d(nt,"On this page, we provide an update from "),D=w(nt,"A",{href:!0});var Ml=f(D);P=d(Ml,"our previous trends analysis (2023-2024)"),Ml.forEach(s),k=d(nt,`, specifically looking at\r
      year-over-year trends comparing September to December `),Y=d(nt,U),Q=d(nt,` to the same period in\r
      `),fe=d(nt,te),ge=d(nt,`\r
      and `),_=d(nt,Ve),g=d(nt,"."),nt.forEach(s),ce=G(ee),ie=w(ee,"P",{});var Ut=f(ie);Ge=d(Ut,`The solid lines on the charts below represent the number of daily unique stops in the downtown\r
      area, split by the three years for comparison. The dotted lines provide a\r
      baseline of the average level of activity in\r
      `),Re=d(Ut,ue),ve=d(Ut,`, allowing for comparison to the following years. When\r
      the solid lines extend above the dotted baseline, downtown activity is\r
      greater compared to `),pe=d(Ut,Ee),ae=d(Ut,` months. When they dip below the dotted\r
      line, activity is on a downswing.`),Ut.forEach(s),ye=G(ee),De=w(ee,"P",{});var Sl=f(De);me=d(Sl,`There are two interactive toggle views at the top, one for view mode\r
      (Overall vs. By Visitor) and one for the percent change comparison. When\r
      "By Visitor" is selected, you can view by trends by those who A) work downtown B) live downtown and C) neither work nor live downtown.`),Sl.forEach(s),et=G(ee),he=w(ee,"H5",{});var Rl=f(he);We=d(Rl,"Key findings:"),Rl.forEach(s),se=G(ee),X=w(ee,"P",{});var ke=f(X);ze=d(ke,"‣ "),Te=w(ke,"SPAN",{class:!0});var Nl=f(Te);Ne=d(Nl,r[11]),Nl.forEach(s),de=d(ke,` out of\r
      `),Ye=w(ke,"SPAN",{class:!0});var Bl=f(Ye);Le=d(Bl,r[10]),Bl.forEach(s),x=d(ke,`\r
      US cities rose in activity in 2025 compared to 2024, with a mean increase of\r
      `),Pe=w(ke,"SPAN",{class:!0});var pl=f(Pe);Ke=d(pl,He),tt=d(pl,"%"),pl.forEach(s),be=d(ke,`.\r
      `),we=w(ke,"BR",{}),st=d(ke,`\r
      ‣ Compared to 2023, `),Ue=w(ke,"SPAN",{class:!0});var Ol=f(Ue);yt=d(Ol,r[8]),Ol.forEach(s),Ce=d(ke,` out of\r
      `),gt=w(ke,"SPAN",{class:!0});var Gl=f(gt);Mt=d(Gl,r[10]),Gl.forEach(s),jt=d(ke,`\r
      cities saw increases, with a mean increase of\r
      `),ot=w(ke,"SPAN",{class:!0});var yl=f(ot);St=d(yl,Ct),Xt=d(yl,"%"),yl.forEach(s),Qt=d(ke,`,\r
      indicating that most downtowns are up from their `),F=d(ke,sr),Zt=d(ke,`\r
      activity levels.`),ke.forEach(s),Et=G(ee),Ie=w(ee,"P",{});var bt=f(Ie);xt=d(bt,"Note 1: Trends are based on a sample of data from "),ct=w(bt,"A",{href:!0,target:!0});var Hl=f(ct);$t=d(Hl,"Cuebiq"),Hl.forEach(s),er=d(bt,`, but use different cell\r
      phone data providers from our previous rankings analysis. The trendlines measure\r
      the average level of activity over the course of the year, while the\r
      ranking metric shows the percent difference in the average number of\r
      unique devices in `),tr=d(bt,or),yr=d(bt," versus the same set of months in "),gr=d(bt,ml),mr=d(bt,"."),bt.forEach(s),wr=G(ee),mt=w(ee,"P",{});var ir=f(mt);kr=d(ir,"Note 2: Baltimore's data is cut off at 2023 "),Dt=w(ir,"A",{href:!0,target:!0});var Ul=f(Dt);br=d(Ul,`due to data privacy\r
      restrictions`),Ul.forEach(s),Cr=d(ir,`. Portland's data is cut off at mid-December 2025, due to \r
      `),Rt=w(ir,"A",{href:!0});var ql=f(Rt);Er=d(ql,"Oregon's Consumer Privacy Act."),ql.forEach(s),ir.forEach(s),ee.forEach(s),Dr=G($),Je=w($,"DIV",{class:!0});var qt=f(Je);ut=w(qt,"H4",{});var Ft=f(ut);Lr=d(Ft,"Unique Devices Downtown (September to December from "),Ar=d(Ft,wl),Vr=d(Ft," to "),Pr=d(Ft,kl),Tr=d(Ft,")"),Ft.forEach(s),Ir=G(qt),wt=w(qt,"DIV",{class:!0});var fr=f(wt);rt=w(fr,"DIV",{class:!0});var Wt=f(rt);Nt=w(Wt,"SPAN",{class:!0});var Fl=f(Nt);Mr=d(Fl,"View mode:"),Fl.forEach(s),Sr=G(Wt),ht=w(Wt,"BUTTON",{class:!0});var Wl=f(ht);Rr=d(Wl,"Overall"),Wl.forEach(s),Nr=G(Wt),ft=w(Wt,"BUTTON",{class:!0});var zl=f(ft);Br=d(zl,"By Visitor"),zl.forEach(s),Wt.forEach(s),Or=G(fr),lt=w(fr,"DIV",{class:!0});var zt=f(lt);Bt=w(zt,"SPAN",{class:!0});var Yl=f(Bt);Gr=d(Yl,"Compare:"),Yl.forEach(s),Hr=G(zt),vt=w(zt,"BUTTON",{class:!0});var Kl=f(vt);Ur=d(Kl,"2025 vs 2023"),Kl.forEach(s),qr=G(zt),dt=w(zt,"BUTTON",{class:!0});var Jl=f(dt);Fr=d(Jl,"2025 vs 2024"),Jl.forEach(s),zt.forEach(s),fr.forEach(s),Wr=G(qt),Xe.l(qt),qt.forEach(s),zr=G($),Ot=w($,"DIV",{class:!0});var jl=f(Ot);_t=w(jl,"DIV",{class:!0});var vr=f(_t);Gt=w(vr,"DIV",{class:!0});var Xl=f(Gt);Ht=w(Xl,"DIV",{class:!0});var Ql=f(Ht);Be=M(Ql,"svg",{width:!0,height:!0,class:!0});var ar=f(Be);kt=M(ar,"text",{x:!0,y:!0,class:!0});var Zl=f(kt);Yr=d(Zl,"City"),Zl.forEach(s),Qe.l(ar),je=M(ar,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),f(je).forEach(s);for(let gl=0;gl<3;gl+=1)qe[gl].l(ar);ar.forEach(s),Ql.forEach(s),Xl.forEach(s),Kr=G(vr),Ze.l(vr),vr.forEach(s),jl.forEach(s),Jr=G($),Ae=w($,"DIV",{class:!0});var Fe=f(Ae);jr=w(Fe,"BR",{}),Xr=G(Fe),Qr=w(Fe,"BR",{}),Zr=G(Fe),rr=w(Fe,"H4",{});var xl=f(rr);xr=d(xl,"More information"),xl.forEach(s),$r=G(Fe),Oe=w(Fe,"P",{});var it=f(Oe);el=d(it,"The trend lines are fit from daily data via a "),Lt=w(it,"A",{href:!0,target:!0});var $l=f(Lt);tl=d($l,"LOESS"),$l.forEach(s),rl=d(it,`\r
      curve. You can download the raw daily data shown to fit these curves\r
      `),At=w(it,"A",{href:!0,target:!0});var en=f(At);ll=d(en,"from this link for the data by visitor type"),en.forEach(s),nl=d(it,`\r
      and\r
      `),Vt=w(it,"A",{href:!0,target:!0});var tn=f(Vt);il=d(tn,"from this link for the overall trends data"),tn.forEach(s),al=d(it,`. The data on the charts are based on the \`normalized_distinct_clean\`\r
      column, which pertains to the number of unique daily devices normalized\r
      by the total number in the metro area. The trend-line and summary\r
      statistics shown are calculated in JavaScript (code is on\r
      `),Pt=w(it,"A",{href:!0,target:!0});var rn=f(Pt);sl=d(rn,"GitHub"),rn.forEach(s),ol=d(it,")."),it.forEach(s),cl=G(Fe),ul=w(Fe,"BR",{}),hl=G(Fe),fl=w(Fe,"BR",{}),Fe.forEach(s),$.forEach(s),this.h()},h(){e(p,"href","https://schoolofcities.utoronto.ca/people/karen-chapple/"),e(p,"target","_blank"),e(N,"href","https://www.linkedin.com/in/yihoi-jung-0b95351b5/"),e(N,"target","_blank"),e(H,"href","https://schoolofcities.utoronto.ca/people/jeff-allen/"),e(H,"target","_blank"),e(D,"href","trends"),e(Te,"class","bold"),e(Ye,"class","bold"),e(Pe,"class","bold"),e(Ue,"class","bold"),e(gt,"class","bold"),e(ot,"class","bold"),e(ct,"href","https://cuebiq.com/social-impact/"),e(ct,"target","_blank"),e(Dt,"href","https://mgaleg.maryland.gov/2024RS/Chapters_noln/CH_454_hb0567e.pdf"),e(Dt,"target","_blank"),e(Rt,"href","https://olis.oregonlegislature.gov/liz/2025R1/Measures/Overview/HB2008"),e(a,"class","text svelte-1v7vl4n"),e(Nt,"class","toggle-label svelte-1v7vl4n"),e(ht,"class","toggle-btn svelte-1v7vl4n"),at(ht,"active",r[0]==="overall"),e(ft,"class","toggle-btn svelte-1v7vl4n"),at(ft,"active",r[0]==="breakdown"),e(rt,"class","toggle-group svelte-1v7vl4n"),e(Bt,"class","toggle-label svelte-1v7vl4n"),e(vt,"class","toggle-btn svelte-1v7vl4n"),at(vt,"active",r[1]==="2025vs2023"),e(dt,"class","toggle-btn svelte-1v7vl4n"),at(dt,"active",r[1]==="2025vs2024"),e(lt,"class","toggle-group svelte-1v7vl4n"),e(wt,"class","view-toggle svelte-1v7vl4n"),e(Je,"class","text svelte-1v7vl4n"),e(kt,"x","12"),e(kt,"y","35"),e(kt,"class","textCity svelte-1v7vl4n"),e(je,"x1","260"),e(je,"y1",45),e(je,"x2",260+oe),e(je,"y2",45),e(je,"stroke","white"),e(je,"stroke-width","1"),e(Be,"width","760"),e(Be,"height",Jt),e(Be,"class","region-bar"),e(Ht,"class","left svelte-1v7vl4n"),e(Gt,"class","chart-wrapper svelte-1v7vl4n"),e(_t,"class","charts-inner svelte-1v7vl4n"),e(Ot,"class","charts-scroll-container svelte-1v7vl4n"),e(Lt,"href","https://en.wikipedia.org/wiki/Local_regression"),e(Lt,"target","_blank"),e(At,"href","/trend_sep_to_dec_23_24_25_activity_deduped.csv"),e(At,"target","_blank"),e(Vt,"href","/trend_sep_to_dec_agg_only.csv"),e(Vt,"target","_blank"),e(Pt,"href","https://github.com/schoolofcities/downtown-recovery/blob/main/src/routes/charts/us_trends/%2Bpage.svelte"),e(Pt,"target","_blank"),e(Ae,"class","text svelte-1v7vl4n")},m(V,$){Tn(t,V,$),T(V,n,$),T(V,i,$),l(i,a),l(a,c),l(c,o),l(a,u),l(a,h),l(h,b),l(h,p),l(p,A),l(h,R),l(h,N),l(N,q),l(h,K),l(h,H),l(H,E),l(a,j),l(a,S),l(S,W),l(W,ne),l(W,J),l(a,Z),l(a,L),l(L,B),l(a,re),l(a,y),l(y,C),l(y,D),l(D,P),l(y,k),l(y,Y),l(y,Q),l(y,fe),l(y,ge),l(y,_),l(y,g),l(a,ce),l(a,ie),l(ie,Ge),l(ie,Re),l(ie,ve),l(ie,pe),l(ie,ae),l(a,ye),l(a,De),l(De,me),l(a,et),l(a,he),l(he,We),l(a,se),l(a,X),l(X,ze),l(X,Te),l(Te,Ne),l(X,de),l(X,Ye),l(Ye,Le),l(X,x),l(X,Pe),l(Pe,Ke),l(Pe,tt),l(X,be),l(X,we),l(X,st),l(X,Ue),l(Ue,yt),l(X,Ce),l(X,gt),l(gt,Mt),l(X,jt),l(X,ot),l(ot,St),l(ot,Xt),l(X,Qt),l(X,F),l(X,Zt),l(a,Et),l(a,Ie),l(Ie,xt),l(Ie,ct),l(ct,$t),l(Ie,er),l(Ie,tr),l(Ie,yr),l(Ie,gr),l(Ie,mr),l(a,wr),l(a,mt),l(mt,kr),l(mt,Dt),l(Dt,br),l(mt,Cr),l(mt,Rt),l(Rt,Er),l(i,Dr),l(i,Je),l(Je,ut),l(ut,Lr),l(ut,Ar),l(ut,Vr),l(ut,Pr),l(ut,Tr),l(Je,Ir),l(Je,wt),l(wt,rt),l(rt,Nt),l(Nt,Mr),l(rt,Sr),l(rt,ht),l(ht,Rr),l(rt,Nr),l(rt,ft),l(ft,Br),l(wt,Or),l(wt,lt),l(lt,Bt),l(Bt,Gr),l(lt,Hr),l(lt,vt),l(vt,Ur),l(lt,qr),l(lt,dt),l(dt,Fr),l(Je,Wr),Xe.m(Je,null),l(i,zr),l(i,Ot),l(Ot,_t),l(_t,Gt),l(Gt,Ht),l(Ht,Be),l(Be,kt),l(kt,Yr),Qe.m(Be,null),l(Be,je);for(let ee=0;ee<3;ee+=1)qe[ee]&&qe[ee].m(Be,null);l(_t,Kr),Ze.m(_t,null),l(i,Jr),l(i,Ae),l(Ae,jr),l(Ae,Xr),l(Ae,Qr),l(Ae,Zr),l(Ae,rr),l(rr,xr),l(Ae,$r),l(Ae,Oe),l(Oe,el),l(Oe,Lt),l(Lt,tl),l(Oe,rl),l(Oe,At),l(At,ll),l(Oe,nl),l(Oe,Vt),l(Vt,il),l(Oe,al),l(Oe,Pt),l(Pt,sl),l(Oe,ol),l(Ae,cl),l(Ae,ul),l(Ae,hl),l(Ae,fl),Me=!0,vl||(bl=[Tt(ht,"click",r[28]),Tt(ft,"click",r[29]),Tt(vt,"click",r[30]),Tt(dt,"click",r[31])],vl=!0)},p(V,$){var ee,lr;if((!Me||$[0]&2048)&&$e(Ne,V[11]),(!Me||$[0]&1024)&&$e(Le,V[10]),(!Me||$[0]&512)&&He!==(He=(((ee=V[9])==null?void 0:ee.toFixed(1))??"...")+"")&&$e(Ke,He),(!Me||$[0]&256)&&$e(yt,V[8]),(!Me||$[0]&1024)&&$e(Mt,V[10]),(!Me||$[0]&128)&&Ct!==(Ct=(((lr=V[7])==null?void 0:lr.toFixed(1))??"...")+"")&&$e(St,Ct),(!Me||$[0]&1)&&at(ht,"active",V[0]==="overall"),(!Me||$[0]&1)&&at(ft,"active",V[0]==="breakdown"),(!Me||$[0]&2)&&at(vt,"active",V[1]==="2025vs2023"),(!Me||$[0]&2)&&at(dt,"active",V[1]==="2025vs2024"),cr===(cr=Cl(V))&&Xe?Xe.p(V,$):(Xe.d(1),Xe=cr(V),Xe&&(Xe.c(),Xe.m(Je,null))),ur===(ur=El(V))&&Qe?Qe.p(V,$):(Qe.d(1),Qe=ur(V),Qe&&(Qe.c(),Qe.m(Be,je))),$&0){dl=[0,1,2];let _e;for(_e=0;_e<3;_e+=1){const nr=un(V,dl,_e);qe[_e]?qe[_e].p(nr,$):(qe[_e]=_n(nr),qe[_e].c(),qe[_e].m(Be,null))}for(;_e<3;_e+=1)qe[_e].d(1)}hr===(hr=Dl(V))&&Ze?Ze.p(V,$):(Ze.d(1),Ze=hr(V),Ze&&(Ze.c(),Ze.m(_t,null)))},i(V){Me||(In(t.$$.fragment,V),Me=!0)},o(V){Mn(t.$$.fragment,V),Me=!1},d(V){Sn(t,V),V&&s(n),V&&s(i),Xe.d(),Qe.d(),It(qe,V),Ze.d(),vl=!1,bn(bl)}}}let oe=500;const Jt=80,wn=5,kn=10;function Kt(r){return parseFloat(r.agg_norm_distinct||0)}function _r(r){return parseFloat(r.normalized_distinct_clean||0)}function si(r,t,n){let i,a,c,o,u,h,b,p={monthNames:"September to December",monthNumbers:[9,10,11,12],year1:2023,year2:2024,year3:2025,update_date:"2026-01-30"},A="overall",R=!0,N=!1;const q=["WORK","HOME","NEITHER"],K={WORK:"var(--brandLightBlue)",HOME:"var(--brandYellow)",NEITHER:"var(--brandLightGreen)"},H={WORK:"Work",HOME:"Home",NEITHER:"Visitor"};let E=[...q],j="2025vs2023";function S(g){E.includes(g)?n(4,E=E.filter(ce=>ce!==g)):n(4,E=[...E,g])}function W(){n(4,E=[...q])}function ne(){n(4,E=[])}let z=[],J=[];async function Z(){n(2,R=!0),performance.now();try{const ce=await(await fetch("/trend_sep_to_dec_agg_only.csv")).text();n(19,z=nn(ce)),n(22,C=[...new Set(z.map(ie=>ie.city))])}catch(g){console.error("Error loading aggregated CSV data:",g)}performance.now()}async function L(){n(3,N=!0),performance.now();try{const ce=await(await fetch("/trend_sep_to_dec_23_24_25_activity_deduped.csv")).text();n(20,J=nn(ce))}catch(g){console.error("Error loading activity CSV data:",g)}performance.now(),n(3,N=!1)}Rn(async()=>{performance.now(),n(23,D=Gn.filter(g=>g.region!=="Canada").map(g=>g.city)),await Z(),performance.now()});const B=Hn("%m/%d/%Y");let re=[],y=[],C=[],D=[],P,k=null,U=null;const Y=()=>{n(0,A="overall"),n(2,R=!0)},Q=()=>{n(0,A="breakdown"),n(3,N=!0)},te=()=>n(1,j="2025vs2023"),fe=()=>n(1,j="2025vs2024"),ge=g=>S(g),Ve=(g,ce,ie)=>ce+(j==="2025vs2023"?g.activityLines[ie].percentChange2025vs2023:g.activityLines[ie].percentChange2025vs2024);function _(){P=this.clientWidth,n(6,P)}return r.$$.update=()=>{r.$$.dirty[0]&29884417&&n(26,i=(()=>{if(A!=="overall"||C.length===0||z.length===0)return[];if(k!==null)return n(2,R=!1),k;performance.now();const g=C.map(ce=>{if(D.includes(ce)){const ie=(ve,Ee)=>{const pe=z.filter(ae=>{const ye=new Date(ae.date);return ae.city===ce&&ye>=ve&&ye<=Ee});if(A==="overall"){const ae=new Set;return pe.filter(ye=>ae.has(ye.date)?!1:(ae.add(ye.date),!0))}return pe},Ge=ie(new Date("2023-09-01"),new Date("2023-12-31")),ue=ie(new Date("2024-09-01"),new Date("2024-12-31")),Re=ie(new Date("2025-09-01"),new Date("2025-12-31"));if(Ge.length>0&&ue.length>0&&Re.length>0){const ve=xe(Ge,F=>Kt(F)),Ee=xe(ue,F=>Kt(F)),pe=xe(Re,F=>Kt(F)),ae=(pe-Ee)/Ee*100,ye=(pe-ve)/ve*100,me=dr().x(F=>B(F.date)).y(F=>Kt(F)).bandwidth(.2)(Ge),he=dr().x(F=>B(F.date)).y(F=>Kt(F)).bandwidth(.2)(ue),se=dr().x(F=>B(F.date)).y(F=>Kt(F)).bandwidth(.2)(Re),X=me.map(F=>F[1]),ze=he.map(F=>F[1]),Te=se.map(F=>F[1]),Ne=[...X,...ze,...Te],de=Math.min(...Ne),Ye=Math.max(...Ne),x=(Ye-de)*.7,Pe=de-x,He=Ye+x,Ke=5,tt=(oe-2*Ke)/3,be=(F,Zt)=>{const Et=new Date(F),Ie=Et.getMonth(),xt=Et.getDate(),ct=Ie-8,$t=new Date(Et.getFullYear(),Ie+1,0).getDate(),er=xt/$t,or=(ct+er)/4,tr=Zt-2023;return Ke+tr*tt+or*tt},we=ln().domain([Pe,He]).range([Jt-kn,wn]),st=Yt().x(F=>be(F[0],2023)).y(F=>we(F[1])),Ue=Yt().x(F=>be(F[0],2024)).y(F=>we(F[1])),yt=Yt().x(F=>be(F[0],2025)).y(F=>we(F[1])),Ce=st(me),gt=Ue(he),Mt=yt(se),jt={cx:be(me[0][0],2023),cy:we(me[0][1])},ot={cx:be(me[me.length-1][0],2023),cy:we(me[me.length-1][1])},Ct={cx:be(he[0][0],2024),cy:we(he[0][1])},St={cx:be(he[he.length-1][0],2024),cy:we(he[he.length-1][1])},Xt={cx:be(se[0][0],2025),cy:we(se[0][1])},Qt={cx:be(se[se.length-1][0],2025),cy:we(se[se.length-1][1])},sr=we(ve);return{city:ce,regressionLine2023:Ce,regressionLine2024:gt,regressionLine2025:Mt,startCircle2023:jt,endCircle2023:ot,startCircle2024:Ct,endCircle2024:St,startCircle2025:Xt,endCircle2025:Qt,meanLine:sr,percentageChange2025vs2024:ae,percentageChange2025vs2023:ye,perChange2025Display:ye.toFixed(2)+"%",perChange2024Display:ae.toFixed(2)+"%"}}}}).filter(ce=>ce!==void 0);return performance.now(),g.length>0&&(n(24,k=g),setTimeout(()=>{n(2,R=!1)},0)),g})()),r.$$.dirty[0]&47185921&&n(27,a=(()=>{if(A!=="breakdown"||C.length===0)return[];if(J.length===0)return L(),[];if(U!==null)return n(3,N=!1),U;performance.now(),performance.now();const g=new Map,ce={2023:{start:new Date("2023-09-01"),end:new Date("2023-12-31")},2024:{start:new Date("2024-09-01"),end:new Date("2024-12-31")},2025:{start:new Date("2025-09-01"),end:new Date("2025-12-31")}};for(const ue of J){const Re=new Date(ue.date);let ve=null;for(const[ye,De]of Object.entries(ce))if(Re>=De.start&&Re<=De.end){ve=ye;break}if(ve===null)continue;const Ee=ue.city,pe=ue.ACTIVITY;g.has(Ee)||g.set(Ee,new Map);const ae=g.get(Ee);ae.has(pe)||ae.set(pe,{2023:[],2024:[],2025:[]}),ae.get(pe)[ve].push(ue)}performance.now();const ie=dr().x(ue=>B(ue.date)).y(ue=>_r(ue)).bandwidth(.2),Ge=C.map(ue=>{if(D.includes(ue)){const Re=g.get(ue);if(!Re)return;const ve={};let Ee=[];for(const pe of q){const ae=Re.get(pe);if(!ae)continue;const ye=ae[2023],De=ae[2024],me=ae[2025];if(ye.length>0&&De.length>0&&me.length>0){const et=xe(ye,de=>_r(de)),he=xe(De,de=>_r(de)),We=xe(me,de=>_r(de)),se=(We-et)/et*100,X=(We-he)/he*100,ze=ie(ye),Te=ie(De),Ne=ie(me);Ee=[...Ee,...ze.map(de=>de[1]),...Te.map(de=>de[1]),...Ne.map(de=>de[1])],ve[pe]={avg2023:et,avg2024:he,avg2025:We,percentChange2025vs2023:se,percentChange2025vs2024:X,regression2023:ze,regression2024:Te,regression2025:Ne}}}if(Object.keys(ve).length===3){const pe=Math.min(...Ee),ae=Math.max(...Ee),De=(ae-pe)*.5,me=pe-De,et=ae+De,he=5,We=(oe-2*he)/3,se=(Le,x)=>{const Pe=new Date(Le),He=Pe.getMonth(),Ke=Pe.getDate(),tt=He-8,be=new Date(Pe.getFullYear(),He+1,0).getDate(),we=Ke/be,st=(tt+we)/4,Ue=x-2023;return he+Ue*We+st*We},X=ln().domain([me,et]).range([Jt-kn,wn]),ze={};for(const Le of q){const x=ve[Le],Pe=Yt().x(Ce=>se(Ce[0],2023)).y(Ce=>X(Ce[1])),He=Yt().x(Ce=>se(Ce[0],2024)).y(Ce=>X(Ce[1])),Ke=Yt().x(Ce=>se(Ce[0],2025)).y(Ce=>X(Ce[1])),tt={cx:se(x.regression2023[0][0],2023),cy:X(x.regression2023[0][1])},be={cx:se(x.regression2023[x.regression2023.length-1][0],2023),cy:X(x.regression2023[x.regression2023.length-1][1])},we={cx:se(x.regression2024[0][0],2024),cy:X(x.regression2024[0][1])},st={cx:se(x.regression2024[x.regression2024.length-1][0],2024),cy:X(x.regression2024[x.regression2024.length-1][1])},Ue={cx:se(x.regression2025[0][0],2025),cy:X(x.regression2025[0][1])},yt={cx:se(x.regression2025[x.regression2025.length-1][0],2025),cy:X(x.regression2025[x.regression2025.length-1][1])};ze[Le]={line2023:Pe(x.regression2023),line2024:He(x.regression2024),line2025:Ke(x.regression2025),percentChange2025vs2023:x.percentChange2025vs2023,percentChange2025vs2024:x.percentChange2025vs2024,startCircle2023:tt,endCircle2023:be,startCircle2024:we,endCircle2024:st,startCircle2025:Ue,endCircle2025:yt}}const Te=xe(q,Le=>ve[Le].percentChange2025vs2023),Ne=xe(q,Le=>ve[Le].percentChange2025vs2024),de=xe(q,Le=>ve[Le].avg2023),Ye=X(de);return{city:ue,activityLines:ze,meanLine:Ye,percentageChange2025vs2023:Te,percentageChange2025vs2024:Ne,perChange2025Display:Te.toFixed(1)+"%",perChange2024Display:Ne.toFixed(1)+"%"}}}}).filter(ue=>ue!==void 0);return performance.now(),Ge.length>0&&(n(3,N=!1),n(25,U=Ge)),Ge})()),r.$$.dirty[0]&201326593&&n(21,re=A==="overall"?i:a),r.$$.dirty[0]&2097154&&(performance.now(),n(5,y=re.slice().sort((g,ce)=>{const ie=j==="2025vs2023"?g.percentageChange2025vs2023??0:g.percentageChange2025vs2024??0;return(j==="2025vs2023"?ce.percentageChange2025vs2023??0:ce.percentageChange2025vs2024??0)-ie})),performance.now()),r.$$.dirty[0]&67108864&&n(11,c=i.filter(g=>g.percentageChange2025vs2024>0).length),r.$$.dirty[0]&67108864&&n(10,o=i.length),r.$$.dirty[0]&67108864&&n(9,u=xe(i.map(g=>g.percentageChange2025vs2024))),r.$$.dirty[0]&67108864&&n(8,h=i.filter(g=>g.percentageChange2025vs2023>0).length),r.$$.dirty[0]&67108864&&n(7,b=xe(i.map(g=>g.percentageChange2025vs2023)))},[A,j,R,N,E,y,P,b,h,u,o,c,p,q,K,H,S,W,ne,z,J,re,C,D,k,U,i,a,Y,Q,te,fe,ge,Ve,_]}class yi extends Dn{constructor(t){super(),Ln(this,t,si,ai,An,{},null,[-1,-1])}}export{yi as component,pi as universal};
